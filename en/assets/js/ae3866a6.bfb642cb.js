"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4361],{7478:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var s=t(4848),i=t(8453);const r={},d="12 I2C\u7f16\u7a0b",c={id:"Knowledge-Notes/IIC",title:"12 I2C\u7f16\u7a0b",description:"\u200b\t\tI2C\uff08Inter-Integrated Circuit BUS\uff09\u662fI2C BUS\u7b80\u79f0\uff0c\u4e2d\u6587\u4e3a\u96c6\u6210\u7535\u8def\u603b\u7ebf\uff0c\u662f\u76ee\u524d\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u603b\u7ebf\u4e4b\u4e00\u3002\u548cIMX6ULL\u6709\u4e9b\u76f8\u5173\u7684\u662f\uff0c\u521a\u597d\u8be5\u603b\u7ebf\u662fNXP\u524d\u8eab\u7684PHILIPS\u8bbe\u8ba1\u3002",source:"@site/docs/Knowledge-Notes/12_IIC.md",sourceDirName:"Knowledge-Notes",slug:"/Knowledge-Notes/IIC",permalink:"/en/docs/Knowledge-Notes/IIC",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linux-docs/tree/main/docs/Knowledge-Notes/12_IIC.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{},sidebar:"KnowledgeNotes",previous:{title:"11 PWM\u7f16\u7a0b",permalink:"/en/docs/Knowledge-Notes/PWM"},next:{title:"14 CAN\u7f16\u7a0b",permalink:"/en/docs/Knowledge-Notes/Linux_Can"}},l={},h=[{value:"12.1 I2C\u534f\u8bae",id:"121-i2c\u534f\u8bae",level:2},{value:"<strong>12.1.1</strong> <strong>\u6982\u8ff0</strong>",id:"1211-\u6982\u8ff0",level:3},{value:"**12.2.2 <strong>\u7269\u7406\u5c42</strong>",id:"1222-\u7269\u7406\u5c42",level:3},{value:"1)  \u7279\u60271\uff1a\u534a\u53cc\u5de5\uff08\u975e\u5168\u53cc\u5de5\uff09",id:"1--\u7279\u60271\u534a\u53cc\u5de5\u975e\u5168\u53cc\u5de5",level:5},{value:"<strong>2)  \u7279\u60272\uff1a\u5730\u5740\u548c\u89d2\u8272\u53ef\u914d\u7f6e</strong>",id:"2--\u7279\u60272\u5730\u5740\u548c\u89d2\u8272\u53ef\u914d\u7f6e",level:5},{value:"<strong>3)  \u7279\u60273\uff1a\u591a\u4e3b\u673a</strong>",id:"3--\u7279\u60273\u591a\u4e3b\u673a",level:5},{value:"4)  \u7279\u60274\uff1a\u4f20\u8f93\u901f\u7387",id:"4--\u7279\u60274\u4f20\u8f93\u901f\u7387",level:5},{value:"5)  \u7279\u60275\uff1a\u8d1f\u8f7d\u548c\u8ddd\u79bb",id:"5--\u7279\u60275\u8d1f\u8f7d\u548c\u8ddd\u79bb",level:5},{value:"<strong>12.2.3</strong> \u534f\u8bae\u5c42",id:"1223-\u534f\u8bae\u5c42",level:3},{value:"1)   \u6570\u636e\u6709\u6548\u6027",id:"1---\u6570\u636e\u6709\u6548\u6027",level:5},{value:"2)  \u8d77\u59cb\u548c\u7ed3\u675f\u6761\u4ef6",id:"2--\u8d77\u59cb\u548c\u7ed3\u675f\u6761\u4ef6",level:5},{value:"3)  \u5e94\u7b54",id:"3--\u5e94\u7b54",level:5},{value:"4)  \u6570\u636e\u5e27\u683c\u5f0f",id:"4--\u6570\u636e\u5e27\u683c\u5f0f",level:5},{value:"12.2 \u5728linux\u7cfb\u7edf\u4e0b\u64cd\u4f5cI2C\u603b\u7ebf\u7684\u5916\u8bbe",id:"122-\u5728linux\u7cfb\u7edf\u4e0b\u64cd\u4f5ci2c\u603b\u7ebf\u7684\u5916\u8bbe",level:2},{value:"12.2.1  \u6982\u8ff0",id:"1221--\u6982\u8ff0",level:3},{value:"<strong>12.2.2</strong> <strong>\u7b80\u8ff0I2C\u7684linux\u9a71\u52a8</strong>",id:"1222-\u7b80\u8ff0i2c\u7684linux\u9a71\u52a8",level:3},{value:"1)   I2C\u6838\u5fc3\u5c42\uff1a",id:"1---i2c\u6838\u5fc3\u5c42",level:4},{value:"2)   I2C\u603b\u7ebf\u9a71\u52a8\u5c42\uff1a",id:"2---i2c\u603b\u7ebf\u9a71\u52a8\u5c42",level:4},{value:"3)   I2C\u603b\u7ebf\u9a71\u52a8\u5c42\uff1a",id:"3---i2c\u603b\u7ebf\u9a71\u52a8\u5c42",level:4},{value:"12.3 \u5728linux\u5e94\u7528\u5c42\u4f7f\u7528I2C",id:"123-\u5728linux\u5e94\u7528\u5c42\u4f7f\u7528i2c",level:2},{value:"<strong>12.3.1</strong> <strong>\u5982\u4f55\u4f7f\u7528I2C tools\u6d4b\u8bd5I2C\u5916\u8bbe</strong>",id:"1231-\u5982\u4f55\u4f7f\u7528i2c-tools\u6d4b\u8bd5i2c\u5916\u8bbe",level:3},{value:"1) I2C tools\u6982\u8ff0\uff1a",id:"1-i2c-tools\u6982\u8ff0",level:4},{value:"2) \u4e0b\u8f7dI2C tools\u6e90\u7801\uff1a",id:"2-\u4e0b\u8f7di2c-tools\u6e90\u7801",level:4},{value:"3) \u7f16\u8bd1I2C tools\u6e90\u7801\uff1a",id:"3-\u7f16\u8bd1i2c-tools\u6e90\u7801",level:4},{value:"4) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cdetect",id:"4-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cdetect",level:4},{value:"5) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cget",id:"5-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cget",level:4},{value:"6) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cdump",id:"6-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cdump",level:4},{value:"7) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cset",id:"7-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cset",level:4},{value:"8) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2ctransfer",id:"8-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2ctransfer",level:4},{value:"<strong>12.3.2</strong> <strong>\u5728linux\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bfb\u5199I2C\u5916\u8bbe</strong>",id:"1232-\u5728linux\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bfb\u5199i2c\u5916\u8bbe",level:3},{value:"1)  \u786e\u5b9aI2C\u9002\u914d\u5668\u7684\u8bbe\u5907\u6587\u4ef6\u8282\u70b9",id:"1--\u786e\u5b9ai2c\u9002\u914d\u5668\u7684\u8bbe\u5907\u6587\u4ef6\u8282\u70b9",level:4},{value:"2) \u6253\u5f00\u9002\u914d\u5668\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9",id:"2-\u6253\u5f00\u9002\u914d\u5668\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9",level:4},{value:"3) IOCTL\u63a7\u5236",id:"3-ioctl\u63a7\u5236",level:4},{value:"4) \u4f7f\u7528I2C\u534f\u8bae\u548c\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1",id:"4-\u4f7f\u7528i2c\u534f\u8bae\u548c\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1",level:4},{value:"5) \u7528read\u548cwrite\u8bfb\u5199I2C\u8bbe\u5907",id:"5-\u7528read\u548cwrite\u8bfb\u5199i2c\u8bbe\u5907",level:4},{value:"6)  \u7528\u6570\u636e\u5305\u7684\u65b9\u5f0f\u64cd\u4f5cI2C\u8bbe\u5907",id:"6--\u7528\u6570\u636e\u5305\u7684\u65b9\u5f0f\u64cd\u4f5ci2c\u8bbe\u5907",level:4},{value:"12.3.3 \u7b80\u4ecbI2C\u7684\u8c03\u8bd5\u65b9\u5f0f",id:"1233-\u7b80\u4ecbi2c\u7684\u8c03\u8bd5\u65b9\u5f0f",level:3},{value:"1) \u6982\u8ff0I2C\u901a\u4fe1\u4e2d\u5b8c\u6210\u6b63\u5e38\u901a\u4fe1\u7684\u5e38\u89c1\u5143\u7d20\uff1a",id:"1-\u6982\u8ff0i2c\u901a\u4fe1\u4e2d\u5b8c\u6210\u6b63\u5e38\u901a\u4fe1\u7684\u5e38\u89c1\u5143\u7d20",level:4},{value:"12.4 \u603b\u7ed3I2C\u5728\u5d4c\u5165\u5f0f\u9879\u76ee\u5f00\u53d1\u7684\u5e94\u7528\u4f18\u7f3a\u70b9",id:"124-\u603b\u7ed3i2c\u5728\u5d4c\u5165\u5f0f\u9879\u76ee\u5f00\u53d1\u7684\u5e94\u7528\u4f18\u7f3a\u70b9",level:2},{value:"1) I2C\u65f6\u949f\u4fe1\u53f7\uff08SCL\uff09\u7684\u540c\u6b65\u95ee\u9898",id:"1-i2c\u65f6\u949f\u4fe1\u53f7scl\u7684\u540c\u6b65\u95ee\u9898",level:4},{value:"2) \u603b\u7ebf\u9a71\u52a8\u80fd\u529b",id:"2-\u603b\u7ebf\u9a71\u52a8\u80fd\u529b",level:4}];function x(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"12-i2c\u7f16\u7a0b",children:"12 I2C\u7f16\u7a0b"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\uff08Inter-Integrated Circuit BUS\uff09\u662fI2C BUS\u7b80\u79f0\uff0c\u4e2d\u6587\u4e3a\u96c6\u6210\u7535\u8def\u603b\u7ebf\uff0c\u662f\u76ee\u524d\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u603b\u7ebf\u4e4b\u4e00\u3002\u548cIMX6ULL\u6709\u4e9b\u76f8\u5173\u7684\u662f\uff0c\u521a\u597d\u8be5\u603b\u7ebf\u662fNXP\u524d\u8eab\u7684PHILIPS\u8bbe\u8ba1\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"121-i2c\u534f\u8bae",children:"12.1 I2C\u534f\u8bae"}),"\n",(0,s.jsxs)(n.h3,{id:"1211-\u6982\u8ff0",children:[(0,s.jsx)(n.strong,{children:"12.1.1"})," ",(0,s.jsx)(n.strong,{children:"\u6982\u8ff0"})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u662f\u4e00\u79cd\u4e32\u884c\u901a\u4fe1\u603b\u7ebf\uff0c\u4f7f\u7528\u591a\u4e3b\u4ece\u67b6\u6784\uff0c\u6700\u521d\u8bbe\u8ba1\u76ee\u7684\u4e3a\u4e86\u8ba9\u4e3b\u677f\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\u6216\u624b\u673a\u7528\u6765\u8fde\u63a5\u4f4e\u901f\u5468\u8fb9\u8bbe\u5907\u3002\u591a\u7528\u4e8e\u5c0f\u6570\u636e\u91cf\u7684\u573a\u5408\uff0c\u6709\u4f20\u8f93\u8ddd\u79bb\u77ed\uff0c\u4efb\u610f\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u673a\u7b49\u7279\u6027\u3002\u4e25\u683c\u610f\u4e49\u4e0a\u8bb2\uff0cI2C\u5e94\u8be5\u662f\u8f6f\u786c\u4ef6\u7ed3\u5408\u4f53\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u5206\u7269\u7406\u5c42\u548c\u534f\u8bae\u5c42\u6765\u4ecb\u7ecd\u8be5\u603b\u7ebf\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u603b\u7ebf\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image001.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4f20\u8f93\u6570\u636e\u65f6\uff0c\u6211\u4eec\u9700\u8981\u53d1\u6570\u636e\uff0c\u4ece\u4e3b\u8bbe\u5907\u53d1\u9001\u5230\u4ece\u8bbe\u5907\u4e0a\u53bb\uff1b\u4e5f\u9700\u8981\u628a\u6570\u636e\u4ece\u4ece\u8bbe\u5907\u4f20\u9001\u5230\u4e3b\u8bbe\u5907\u4e0a\u53bb\uff0c\u6570\u636e\u6d89\u53ca\u5230\u53cc\u5411\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5bf9\u4e8eI2C\u901a\u4fe1\u7684\u8fc7\u7a0b\uff0c\u4e0b\u9762\u4f7f\u7528\u4e00\u4e2a\u5f62\u8c61\u7684\u751f\u6d3b\u4f8b\u5b50\u8fdb\u884c\u7c7b\u6bd4\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image002.jpeg",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4f53\u80b2\u8001\u5e08\uff1a\u53ef\u4ee5\u628a\u7403\u53d1\u7ed9\u5b66\u751f\uff0c\u4e5f\u53ef\u4ee5\u628a\u7403\u4ece\u5b66\u751f\u4e2d\u63a5\u8fc7\u6765\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"\n1. \u53d1\u7403\uff1a\n- a.  \u8001\u5e08\u8bf4\uff1a\u6ce8\u610f\u4e86(start)\uff1b\n- b.  \u8001\u5e08\u5bf9A\u5b66\u751f\u8bf4\uff0c\u6211\u8981\u7403\u53d1\u7ed9\u4f60(A\u5c31\u662f\u5730\u5740)\uff1b\n- c.  \u8001\u5e08\u5c31\u628a\u7403\u53d1\u51fa\u53bb\u4e86\uff08\u4f20\u8f93\uff09\uff1b\n- d.  A\u6536\u5230\u7403\u4e4b\u540e\uff0c\u5e94\u8be5\u544a\u8bc9\u8001\u5e08\u4e00\u58f0\uff08\u56de\u5e94\uff09\uff1b\n- e.  \u8001\u5e08\u8bf4\u4e0b\u8bfe\uff08\u505c\u6b62\uff09\u3002 \n\n2. \u63a5\u7403\uff1a\n\n- a.  \u8001\u5e08\u8bf4\u6ce8\u610f\u4e86(start)\uff1b\n\n- b.  \u8001\u5e08\u8bf4\uff1aB\u628a\u7403\u53d1\u7ed9\u6211(B\u662f\u5730\u5740)\uff1b\n\n- c.  B\u5c31\u628a\u7403\u53d1\u7ed9\u8001\u5e08\uff08\u4f20\u8f93\uff09\uff1b\n\n- d.  \u8001\u5e08\u6536\u5230\u7403\u4e4b\u540e\uff0c\u7ed9B\u8bf4\u4e00\u58f0\uff0c\u8868\u793a\u6536\u5230\u7403\u4e86\uff08\u56de\u5e94\uff09\uff1b\n\n- e.  \u8001\u5e08\u8bf4\u4e0b\u8bfe\uff08\u505c\u6b62\uff09\u3002\n\n  \n\n\u6211\u4eec\u5c31\u4f7f\u7528\u8fd9\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6765\u89e3\u91ca\u4e00\u4e0bI2C\u7684\u4f20\u8f93\u534f\u8bae\uff1a\n\n\u2460 \u8001\u5e08\u8bf4\u6ce8\u610f\u4e86\uff0c\u8868\u793a\u5f00\u59cb\u4fe1\u53f7(start)\n\n\u2461 \u8001\u5e08\u544a\u8bc9\u67d0\u4e2a\u5b66\u751f\uff0c\u8868\u793a\u53d1\u9001\u5730\u5740(address)\n\n\u2462 \u8001\u5e08\u53d1\u7403/\u63a5\u7403\uff0c\u8868\u793a\u6570\u636e\u7684\u4f20\u8f93\n\n\u2463 \u8001\u5e08/\u5b66\u751f\u6536\u5230\u7403\uff0c\u56de\u5e94\u8868\u793a\uff1a\u56de\u5e94\u4fe1\u53f7(ACK)\n\n\u2464 \u8001\u5e08\u8bf4\u4e0b\u8bfe\uff0c\u8868\u793aI2C\u4f20\u8f93\u63a5\u53d7(P)\n\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"1222-\u7269\u7406\u5c42",children:["**12.2.2 ",(0,s.jsx)(n.strong,{children:"\u7269\u7406\u5c42"})]}),"\n",(0,s.jsx)(n.h5,{id:"1--\u7279\u60271\u534a\u53cc\u5de5\u975e\u5168\u53cc\u5de5",children:"1)  \u7279\u60271\uff1a\u534a\u53cc\u5de5\uff08\u975e\u5168\u53cc\u5de5\uff09"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u603b\u7ebf\u4e2d\u53ea\u4f7f\u7528\u4e24\u6761\u7ebf\u8def\uff1aSDA\u3001SCL\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2460 SDA(\u4e32\u884c\u6570\u636e\u7ebf):"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e3b\u82af\u7247\u901a\u8fc7\u4e00\u6839SDA\u7ebf\u65e2\u53ef\u4ee5\u628a\u6570\u636e\u53d1\u7ed9\u4ece\u8bbe\u5907\uff0c\u4e5f\u53ef\u4ee5\u4eceSDA\u4e0a\u8bfb\u53d6\u6570\u636e\u3002\u5728I2C\u8bbe\u5907\u5185\u90e8\u6709\u4e24\u4e2a\u5f15\u811a\uff08\u53d1\u9001\u5f15\u811a/\u63a5\u53d7\u5f15\u811a\uff09\uff0c\u5b83\u4eec\u90fd\u8fde\u63a5\u5230\u5916\u90e8\u7684SDA\u7ebf\u4e0a\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fedevice\u7aef\u91cc\u9762\u7684I2Cn_SDA(output/input)\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u2461 SCL(\u4e32\u884c\u65f6\u949f\u7ebf)\uff1a"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u4e3b\u8bbe\u5907\u53d1\u51fa\u65f6\u949f\uff0c\u4ece\u8bbe\u5907\u63a5\u6536\u65f6\u949f\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tSDA\u548cSCL\u5f15\u811a\u7684\u5185\u90e8\u7535\u8def\u7ed3\u6784\u4e00\u81f4\uff0c\u5f15\u811a\u7684\u8f93\u51fa\u9a71\u52a8\u4e0e\u8f93\u5165\u7f13\u51b2\u8fde\u5728\u4e00\u8d77\u3002\u5176\u4e2d\u8f93\u51fa\u4e3a\u6f0f\u6781\u5f00\u8def\u7684\u573a\u6548\u5e94\u7ba1\u3001\u8f93\u5165\u7f13\u51b2\u4e3a\u4e00\u53ea\u9ad8\u8f93\u5165\u963b\u6297\u7684\u540c\u76f8\u5668\u3002\u8fd9\u6837\u7ed3\u6784\u6709\u5982\u4e0b\u7279\u6027\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"a. \u7531\u4e8e SDA\u3001SCL \u4e3a\u6f0f\u6781\u5f00\u8def\u7ed3\u6784\uff0c\u501f\u52a9\u4e8e\u5916\u90e8\u7684\u4e0a\u62c9\u7535\u963b\u5b9e\u73b0\u4e86\u4fe1\u53f7\u7684\u201c\u7ebf\u4e0e\u201d\u903b\u8f91\uff1b"}),"\n",(0,s.jsx)(n.p,{children:"b. \u5f15\u811a\u5728\u8f93\u51fa\u4fe1\u53f7\u7684\u540c\u65f6\u8fd8\u4f5c\u7528\u8f93\u5165\u4fe1\u53f7\u4f9b\u5185\u90e8\u8fdb\u884c\u68c0\u6d4b\uff0c\u5f53\u8f93\u51fa\u4e0e\u8f93\u5165\u4e0d\u4e00\u81f4\u65f6\uff0c\u5c31\u8868\u793a\u6709\u95ee\u9898\u53d1\u751f\u4e86\u3002\u8fd9\u4e3a \u201c\u65f6\u949f\u540c\u6b65\u201d\u548c\u201c\u603b\u7ebf\u4ef2\u88c1\u201d\u63d0\u4f9b\u786c\u4ef6\u57fa\u7840\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tSDA\u548cCLK\u8fde\u63a5\u7ebf\u4e0a\u8fde\u6709\u4e24\u4e2a\u4e0a\u62c9\u7535\u963b\uff0c\u5f53\u603b\u7ebf\u7a7a\u95f2\u65f6\uff0c\u4e24\u6839\u7ebf\u5747\u4e3a\u9ad8\u7535\u5e73\u3002\u8fde\u5230\u603b\u7ebf\u4e0a\u7684\u4efb\u4e00\u5668\u4ef6\u8f93\u51fa\u7684\u4f4e\u7535\u5e73\uff0c\u90fd\u5c06\u4f7f\u603b\u7ebf\u7684\u4fe1\u53f7\u53d8\u4f4e\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7269\u7406\u5c42\u8fde\u63a5\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image003.png",alt:""})}),"\n",(0,s.jsx)(n.h5,{id:"2--\u7279\u60272\u5730\u5740\u548c\u89d2\u8272\u53ef\u914d\u7f6e",children:(0,s.jsx)(n.strong,{children:"2)  \u7279\u60272\uff1a\u5730\u5740\u548c\u89d2\u8272\u53ef\u914d\u7f6e"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u6bcf\u4e2a\u8fde\u63a5\u5230\u603b\u7ebf\u7684\u5668\u4ef6\u90fd\u53ef\u4ee5\u901a\u8fc7\u552f\u4e00\u7684\u5730\u5740\u548c\u5176\u5b83\u5668\u4ef6\u901a\u4fe1\uff0c\u4e3b\u673a/\u4ece\u673a\u89d2\u8272\u548c\u5730\u5740\u53ef\u914d\u7f6e\uff0c\u4e3b\u673a\u53ef\u4ee5\u4f5c\u4e3a\u4e3b\u673a\u53d1\u9001\u5668\u548c\u4e3b\u673a\u63a5\u6536\u5668\u3002"}),"\n",(0,s.jsx)(n.h5,{id:"3--\u7279\u60273\u591a\u4e3b\u673a",children:(0,s.jsx)(n.strong,{children:"3)  \u7279\u60273\uff1a\u591a\u4e3b\u673a"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u662f\u771f\u6b63\u7684\u591a\u4e3b\u673a\u603b\u7ebf\uff0cI2C\u8bbe\u5907\u53ef\u4ee5\u5728\u901a\u8baf\u8fc7\u7a0b\u8f6c\u53d8\u6210\u4e3b\u673a\u3002\u5982\u679c\u4e24\u4e2a\u6216\u66f4\u591a\u7684\u4e3b\u673a\u540c\u65f6\u8bf7\u6c42\u603b\u7ebf\uff0c\u53ef\u4ee5\u901a\u8fc7\u51b2\u7a81\u68c0\u6d4b\u548c\u4ef2\u88c1\u9632\u6b62\u603b\u7ebf\u6570\u636e\u88ab\u7834\u574f\u3002"}),"\n",(0,s.jsx)(n.h5,{id:"4--\u7279\u60274\u4f20\u8f93\u901f\u7387",children:"4)  \u7279\u60274\uff1a\u4f20\u8f93\u901f\u7387"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4f20\u8f93\u901f\u7387\u5728\u6807\u51c6\u6a21\u5f0f\u4e0b\u53ef\u4ee5\u8fbe\u5230100kb/s\uff0c\u5feb\u901f\u6a21\u5f0f\u4e0b\u53ef\u4ee5\u8fbe\u5230400kb/s\u3002"}),"\n",(0,s.jsx)(n.h5,{id:"5--\u7279\u60275\u8d1f\u8f7d\u548c\u8ddd\u79bb",children:"5)  \u7279\u60275\uff1a\u8d1f\u8f7d\u548c\u8ddd\u79bb"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8282\u70b9\u7684\u6700\u5927\u6570\u91cf\u53d7\u9650\u4e8e\u5730\u5740\u7a7a\u95f4\u4ee5\u53ca\u603b\u7ebf\u7535\u5bb9\u51b3\u5b9a\uff0c\u53e6\u5916\u603b\u7535\u5bb9\u4e5f\u9650\u5236\u4e86\u5b9e\u9645\u901a\u4fe1\u8ddd\u79bb\u53ea\u6709\u51e0\u7c73\u3002"}),"\n",(0,s.jsxs)(n.h3,{id:"1223-\u534f\u8bae\u5c42",children:[(0,s.jsx)(n.strong,{children:"12.2.3"})," \u534f\u8bae\u5c42"]}),"\n",(0,s.jsx)(n.h5,{id:"1---\u6570\u636e\u6709\u6548\u6027",children:"1)   \u6570\u636e\u6709\u6548\u6027"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u534f\u8bae\u7684\u6570\u636e\u6709\u6548\u6027\u662f\u9760\u65f6\u949f\u6765\u4fdd\u8bc1\u7684\uff0c\u5728\u65f6\u949f\u7684\u9ad8\u7535\u5e73\u5468\u671f\u5185\uff0cSDA\u7ebf\u4e0a\u7684\u6570\u636e\u5fc5\u987b\u4fdd\u6301\u7a33\u5b9a\u3002\u6570\u636e\u7ebf\u4ec5\u53ef\u4ee5\u5728\u65f6\u949fSCL\u4e3a\u4f4e\u7535\u5e73\u65f6\u6539\u53d8\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image004.png",alt:""})}),"\n",(0,s.jsx)(n.h5,{id:"2--\u8d77\u59cb\u548c\u7ed3\u675f\u6761\u4ef6",children:"2)  \u8d77\u59cb\u548c\u7ed3\u675f\u6761\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:"**\u8d77\u59cb\u6761\u4ef6\uff1a**\u5f53SCL\u4e3a\u9ad8\u7535\u5e73\u7684\u65f6\u5019\uff0cSDA\u7ebf\u4e0a\u7531\u9ad8\u5230\u4f4e\u7684\u8df3\u53d8\u88ab\u5b9a\u4e49\u4e3a\u8d77\u59cb\u6761\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"**\u7ed3\u675f\u6761\u4ef6\uff1a**\u5f53SCL\u4e3a\u9ad8\u7535\u5e73\u7684\u65f6\u5019\uff0cSDA\u7ebf\u4e0a\u7531\u4f4e\u5230\u9ad8\u7684\u8df3\u53d8\u88ab\u5b9a\u4e49\u4e3a\u505c\u6b62\u6761\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8981\u6ce8\u610f\u8d77\u59cb\u548c\u7ec8\u6b62\u4fe1\u53f7\u90fd\u662f\u7531\u4e3b\u673a\u53d1\u51fa\u7684\uff0c\u8fde\u63a5\u5230I2C\u603b\u7ebf\u4e0a\u7684\u5668\u4ef6\uff0c\u82e5\u5177\u6709I2C\u603b\u7ebf\u7684\u786c\u4ef6\u63a5\u53e3\uff0c\u5219\u5f88\u5bb9\u6613\u68c0\u6d4b\u5230\u8d77\u59cb\u548c\u7ec8\u6b62\u4fe1\u53f7\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image005.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u603b\u7ebf\u5728\u8d77\u59cb\u6761\u4ef6\u4e4b\u540e\uff0c\u89c6\u4e3a\u5fd9\u72b6\u6001\uff0c\u5728\u505c\u6b62\u6761\u4ef6\u4e4b\u540e\u88ab\u89c6\u4e3a\u7a7a\u95f2\u72b6\u6001\u3002"}),"\n",(0,s.jsx)(n.h5,{id:"3--\u5e94\u7b54",children:"3)  \u5e94\u7b54"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u6bcf\u5f53\u4e3b\u673a\u5411\u4ece\u673a\u53d1\u9001\u5b8c\u4e00\u4e2a\u5b57\u8282\u7684\u6570\u636e\uff0c\u4e3b\u673a\u603b\u662f\u9700\u8981\u7b49\u5f85\u4ece\u673a\u7ed9\u51fa\u4e00\u4e2a\u5e94\u7b54\u4fe1\u53f7\uff0c\u4ee5\u786e\u8ba4\u4ece\u673a\u662f\u5426\u6210\u529f\u63a5\u6536\u5230\u4e86\u6570\u636e\uff0c\u4ece\u673a\u5e94\u7b54\u4e3b\u673a\u6240\u9700\u8981\u7684\u65f6\u949f\u4ecd\u662f\u4e3b\u673a\u63d0\u4f9b\u7684\uff0c\u5e94\u7b54\u51fa\u73b0\u5728\u6bcf\u4e00\u6b21\u4e3b\u673a\u5b8c\u62108\u4e2a\u6570\u636e\u4f4d\u4f20\u8f93\u540e\u7d27\u8ddf\u7740\u7684\u65f6\u949f\u5468\u671f\uff0c\u4f4e\u7535\u5e730\u8868\u793a\u5e94\u7b54\uff0c1\u8868\u793a\u975e\u5e94\u7b54\u3002"}),"\n",(0,s.jsx)(n.h5,{id:"4--\u6570\u636e\u5e27\u683c\u5f0f",children:"4)  \u6570\u636e\u5e27\u683c\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tSDA\u7ebf\u4e0a\u6bcf\u4e2a\u5b57\u8282\u5fc5\u987b\u662f8\u4f4d\u957f\uff0c\u5728\u6bcf\u4e2a\u4f20\u8f93(transfer)\u4e2d\u6240\u4f20\u8f93\u5b57\u8282\u6570\u6ca1\u6709\u9650\u5236\uff0c\u6bcf\u4e2a\u5b57\u8282\u540e\u9762\u5fc5\u987b\u8ddf\u4e00\u4e2aACK\u30028\u4f4d\u6570\u636e\u4e2d\uff0c\u5148\u4f20\u8f93\u6700\u9ad8\u6709\u6548\u4f4d\uff08MSB\uff09\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image006.png",alt:""})}),"\n",(0,s.jsx)(n.h2,{id:"122-\u5728linux\u7cfb\u7edf\u4e0b\u64cd\u4f5ci2c\u603b\u7ebf\u7684\u5916\u8bbe",children:"12.2 \u5728linux\u7cfb\u7edf\u4e0b\u64cd\u4f5cI2C\u603b\u7ebf\u7684\u5916\u8bbe"}),"\n",(0,s.jsx)(n.h3,{id:"1221--\u6982\u8ff0",children:"12.2.1  \u6982\u8ff0"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u56fe\u662f\u5728linux\u7cfb\u7edf\u73af\u5883\u91cc\u64cd\u4f5ci2c\u603b\u7ebf\u4e0a\u7684\u5916\u8bbe\u6d41\u7a0b\u6846\u56fe\u3002\u6211\u4eec\u6309\u7167\u4ece\u4e0b\u5411\u4e0a\u7684\u987a\u5e8f\u7814\u7a76\u4e00\u4e0b\u8be5\u6d41\u7a0b\u4e2d\u5404\u4e2a\u89d2\u8272\u7684\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5728\u786c\u4ef6\u5c42\u4e2d\uff0cI2C\u786c\u4ef6\u603b\u7ebf\u53ea\u6709\u4e24\u6761\u7ebf\u8def\uff0c\u4e0a\u9762\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2aI2C-device\uff0c\u8fd9\u4e9bI2C-device\u6709\u7684\u5728I2C\u603b\u7ebf\u91cc\u5145\u5f53\u4e3b\u673a\u7684\u89d2\u8272\uff0c\u4e00\u822c\u60c5\u51b5\u8be5\u4e3b\u673a\u4e3a\u677f\u5b50\u4e0a\u7684\u4e3bcpu\u4e2d\u7684I2C\u63a7\u5236\u5668\uff0c\u6bd4\u5982\u6211\u4eec\u7528\u7684100ask_imx6UL\u677f\u5b50\uff0c\u8fd9\u4e2aI2C\u4e3b\u673a\u5c31\u662fimx6\u4e2d\u7684I2C\u63a7\u5236\u5668\u6a21\u5757\uff1b\u5176\u4ed6\u7684I2C-device\u5728I2C\u603b\u7ebf\u91cc\u5145\u5f53\u4ece\u673a\u7684\u89d2\u8272\uff0c\u901a\u5e38\u8fd9\u4e9b\u4ece\u673a\u662f\u677f\u5b50\u4e0a\u5b8c\u6210\u7279\u5b9a\u529f\u80fd\u7684\u4f20\u611f\u5668\u5916\u8bbe\uff0c\u53ea\u4e0d\u8fc7\u8be5\u5916\u8bbe\u4e0e\u4e3b\u63a7cpu\u7684\u901a\u4fe1\u65b9\u5f0f\u662f\u53ea\u9700\u8981\u4e24\u6761\u7ebf\u8def\u7684I2C\u603b\u7ebf\uff0c\u6bd4\u5982\u5728\u6211\u4eec\u7684100ask_imx6UL\u677f\u5b50\u4e2d\u5c31\u6709eeprom\u548cAP3216\u4e24\u4e2a\u5916\u8bbe\uff0c\u5b83\u4eec\u5728I2C\u603b\u7ebf\u4e2d\u5145\u5f53\u7684\u90fd\u662fI2C\u4ece\u673a\u7684\u89d2\u8272\uff0c\u5b83\u4eec\u548c\u4e3b\u63a7\u82af\u7247imx6\u4e2d\u7684I2C\u63a7\u5236\u56681\u90fd\u662f\u4ee5\u5e76\u8054\u7684\u65b9\u5f0f\u6302\u5728\u8fd9\u4e2aI2C\u603b\u7ebf\u4e0a\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5728\u5185\u6838\u4e2d\uff0c\u9a71\u52a8\u7a0b\u5e8f\u5bf9\u4e0b\u8981\u5b8c\u6210I2C\u603b\u7ebf\u4e0a\u7684I2C\u901a\u4fe1\u534f\u8bae\uff0c\u6536\u96c6\u786c\u4ef6\u4f20\u611f\u5668\u7684I2C\u6570\u636e\u5e76\u5c01\u88c5\u6210\u6807\u51c6\u7684linux\u64cd\u4f5c\u63a5\u53e3\u4f9b\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u64cd\u4f5c\u3002\u5bf9\u4e0a\u8981\u5b9e\u73b0\u53ef\u4ee5\u901a\u8fc7linux\u7a0b\u5e8f\u628a\u6570\u636e\u6d41\u7ec4\u7ec7\u6210I2C\u534f\u8bae\u4e0b\u53d1\u5230\u786c\u4ef6\u5c42\u7684\u76f8\u5e94\u7684\u5916\u8bbe\u4f20\u611f\u5668\u4e2d\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5728\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u5e94\u7528\u5de5\u7a0b\u5e08\u5b8c\u5168\u53ef\u4ee5\u4e0d\u5fc5\u7406\u4f1aI2C\u534f\u8bae\u7684\u8be6\u7ec6\u89c4\u5b9a\u3002\u53ea\u9700\u8981\u6309\u7167\u9a71\u52a8\u5c42\u63d0\u4f9b\u7ed9\u6211\u4eec\u7684\u64cd\u4f5cI2C\u5916\u8bbe\u7684\u64cd\u4f5c\u63a5\u53e3\u51fd\u6570\u5c31\u53ef\u4ee5\u50cf\u64cd\u4f5clinux\u4e2d\u5176\u4ed6\u666e\u901a\u8bbe\u5907\u6587\u4ef6\u90a3\u6837\u8f7b\u677e\u7684\u64cd\u4f5cI2C\u5916\u8bbe\u4e86\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image007.png",alt:""})}),"\n",(0,s.jsxs)(n.h3,{id:"1222-\u7b80\u8ff0i2c\u7684linux\u9a71\u52a8",children:[(0,s.jsx)(n.strong,{children:"12.2.2"})," ",(0,s.jsx)(n.strong,{children:"\u7b80\u8ff0I2C\u7684linux\u9a71\u52a8"})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u5728linux\u5185\u6838\u5c42\u7684\u9a71\u52a8\u6846\u67b6\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"1---i2c\u6838\u5fc3\u5c42",children:"1)   I2C\u6838\u5fc3\u5c42\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u6838\u5fc3\u63d0\u4f9b\u4e86I2C\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u7684\u6ce8\u518c\u3001\u6ce8\u9500\u65b9\u6cd5\uff0cI2C\u901a\u4fe1\u65b9\u6cd5(algorithm)\u7684\u4e0a\u5c42\u90e8\u5206\uff0c\u5e76\u4e14\u8fd8\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u4e0e\u5177\u4f53\u786c\u4ef6\u5e73\u53f0\u65e0\u5173\u7684\u63a5\u53e3\u51fd\u6570\u4ee5\u53ca\u63a2\u6d4b\u8bbe\u5907\uff0c\u68c0\u6d4b\u8bbe\u5907\u5730\u5740\u7684\u4e0a\u5c42\u4ee3\u7801\u7b49\u3002\u5b83\u4f4d\u4e8e\u5185\u6838\u6e90\u7801\u76ee\u5f55\u4e0b\u7684drivers/i2c/i2c-core.c\u6587\u4ef6\u4e2d\uff0c\u662fI2C\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u4e4b\u95f4\u4f9d\u8d56\u4e8eI2C\u6838\u5fc3\u4f5c\u4e3a\u7ebd\u5e26\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u6838\u5fc3\u4e2d\u7684\u4e3b\u8981\u51fd\u6570\u5305\u62ec\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u589e\u52a0/\u5220\u9664i2c_adapter"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_add_adapter(struct i2c_adapter *adap);\nint i2c_del_adapter(struct i2c_adapter *adap);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u589e\u52a0/\u5220\u9664i2c_driver"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_register_driver(struct module *owner, struct i2c_driver *driver);\nint i2c_del_driver(struct i2c_driver *driver);\ninline int i2c_add_driver(struct i2c_driver *driver);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2c_client\u4f9d\u9644/\u8131\u79bb"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_attach_client(struct i2c_client *client);\nint i2c_detach_client(struct i2c_client *client);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2c\u4f20\u8f93\u3001\u53d1\u9001\u548c\u63a5\u6536"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_transfer(struct i2c_adapter * adap, struct i2c_msg *msgs, int num);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7528\u4e8e\u8fdb\u884cI2C\u9002\u914d\u5668\u548cI2C\u8bbe\u5907\u4e4b\u95f4\u7684\u4e00\u7ec4\u6d88\u606f\u4ea4\u4e92\u3002\u5176\u672c\u8eab\u4e0d\u5177\u5907\u9a71\u52a8\u9002\u914d\u5668\u7269\u7406\u786c\u4ef6\u5b8c\u6210\u6d88\u606f\u4ea4\u4e92\u7684\u80fd\u529b\uff0c\u5b83\u53ea\u662f\u5bfb\u627e\u5230i2c_adapter\u5bf9\u5e94\u7684i2c_algorithm\uff0c\u5e76\u4f7f\u7528i2c_algorithm\u7684master_xfer()\u51fd\u6570\u771f\u6b63\u9a71\u52a8\u786c\u4ef6\u6d41\u7a0b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_master_send(struct i2c_client *client,const char *buf ,int count);\nint i2c_master_recv(struct i2c_client *client, char *buf ,int count);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2c_master_send()\u548ci2c_master_recv()\u51fd\u6570\u5185\u90e8\u4f1a\u8c03\u7528i2c_transfer()\u51fd\u6570\u5206\u522b\u5b8c\u6210\u4e00\u6761\u5199\u6d88\u606f\u548c\u4e00\u6761\u8bfb\u6d88\u606f\u3002"}),"\n",(0,s.jsx)(n.p,{children:"a\uff09 I2C\u63a7\u5236\u547d\u4ee4\u5206\u6d3e"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u9762\u51fd\u6570\u6709\u52a9\u4e8e\u5c06\u53d1\u7ed9I2C\u9002\u914d\u5668\u8bbe\u5907\u6587\u4ef6ioctl\u7684\u547d\u4ee4\u5206\u6d3e\u7ed9\u5bf9\u5e94\u9002\u914d\u5668\u7684algorithm\u7684algo_control()\u51fd\u6570\u6216i2c_driver\u7684command()\u51fd\u6570\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"int i2c_control(struct i2c_client *client, unsigned int cmd, unsigned long arg);\nvoid i2c_clients_command(struct i2c_adapter *adap, unsigned int cmd, void *arg);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2---i2c\u603b\u7ebf\u9a71\u52a8\u5c42",children:"2)   I2C\u603b\u7ebf\u9a71\u52a8\u5c42\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u603b\u7ebf\u9a71\u52a8\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u9002\u914d\u5668\u7aef\u7684\u5b9e\u73b0\uff0c\u9002\u914d\u5668\u53ef\u7531CPU\u63a7\u5236\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u96c6\u6210\u5728CPU\u5185\u90e8\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5b83\u4e3b\u8981\u5b8c\u6210\u7684\u529f\u80fd\u6709\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"a\uff09 \u521d\u59cb\u5316I2C\u9002\u914d\u5668\u6240\u4f7f\u7528\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u7533\u8bf7I/O\u5730\u5740\u3001\u4e2d\u65ad\u53f7\u7b49\u3002"}),"\n",(0,s.jsx)(n.p,{children:"b\uff09 \u901a\u8fc7i2c_add_adapter()\u6dfb\u52a0i2c_adapter\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5f53\u7136\u8fd9\u4e2ai2c_adapter\u6570\u636e\u7ed3\u6784\u7684\u6210\u5458\u5df2\u7ecf\u88abxxx\u9002\u914d\u5668\u7684\u76f8\u5e94\u51fd\u6570\u6307\u9488\u6240\u521d\u59cb\u5316\u3002"}),"\n",(0,s.jsx)(n.p,{children:"c\uff09 \u91ca\u653eI2C\u9002\u914d\u5668\u6240\u4f7f\u7528\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u91ca\u653eI/O\u5730\u5740\u3001\u4e2d\u65ad\u53f7\u7b49\u3002"}),"\n",(0,s.jsx)(n.p,{children:"d\uff09 \u901a\u8fc7i2c_del_adapter()\u5220\u9664i2c_adapter\u7684\u6570\u636e\u7ed3\u6784\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"3---i2c\u603b\u7ebf\u9a71\u52a8\u5c42",children:"3)   I2C\u603b\u7ebf\u9a71\u52a8\u5c42\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C\u8bbe\u5907\u9a71\u52a8(\u4e5f\u79f0\u4e3a\u5ba2\u6237\u9a71\u52a8)\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u8bbe\u5907\u7aef\u7684\u5b9e\u73b0\uff0c\u8bbe\u5907\u4e00\u822c\u6302\u63a5\u5728\u53d7CPU\u63a7\u5236\u7684I2C\u9002\u914d\u5668\u4e0a\uff0c\u901a\u8fc7I2C\u9002\u914d\u5668\u4e0eCPU\u4ea4\u6362\u6570\u636e\u3002I2C\u8bbe\u5907\u9a71\u52a8\u6a21\u5757\u52a0\u8f7d\u51fd\u6570\u901a\u7528\u7684\u65b9\u6cd5\u662f\u5728I2C\u8bbe\u5907\u9a71\u52a8\u6a21\u5757\u52a0\u8f7d\u51fd\u6570\u4e2d\u5b8c\u6210\u4e24\u4ef6\u4e8b\uff1a\u901a\u8fc7register_chrdev()\u51fd\u6570\u5c06I2C\u8bbe\u5907\u6ce8\u518c\u4e3a\u4e00\u4e2a\u5b57\u7b26\u8bbe\u5907\u3002\u901a\u8fc7I2C\u6838\u5fc3\u7684i2c_add_driver()\u51fd\u6570\u6dfb\u52a0i2c_driver\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"123-\u5728linux\u5e94\u7528\u5c42\u4f7f\u7528i2c",children:"12.3 \u5728linux\u5e94\u7528\u5c42\u4f7f\u7528I2C"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u524d\u9762\u6211\u4eec\u8bb2\u89e3\u4e86I2C\u7684\u534f\u8bae\u53ca\u5728linux\u9a71\u52a8\u6846\u67b6\uff0c\u90a3\u4e48\u5f53\u4f60\u62ff\u5230\u5f00\u53d1\u677f\u6216\u8005\u662f\u4ece\u516c\u53f8\u7684\u786c\u4ef6\u540c\u4e8b\u62ff\u5230\u4e00\u4e2a\u5e26\u6709I2C\u5916\u8bbe\u7684\u677f\u5b50\uff0c\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u6700\u5feb\u901f\u7684\u4f7f\u7528\u8d77\u6765\u8fd9\u4e2aI2C\u8bbe\u5907\u5462\uff1f\u65e2\u7136\u6211\u4eec\u603b\u662f\u8bf4\u8fd9\u4e2aI2C\u603b\u7ebf\u5728\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e2d\u88ab\u5e7f\u6cdb\u7684\u4f7f\u7528\uff0c\u90a3\u4e48\u662f\u5426\u6709\u73b0\u6210\u7684\u6d4b\u8bd5\u5de5\u5177\u5e2e\u6211\u4eec\u5b8c\u6210\u8fd9\u4e2a\u5feb\u901f\u4f7f\u7528\u677f\u5b50\u7684I2C\u8bbe\u5907\u5462\uff1f\u7b54\u6848\u662f\u6709\u7684\uff0c\u800c\u4e14\u8fd9\u4e2a\u6d4b\u8bd5\u5de5\u5177\u7684\u4ee3\u7801\u8fd8\u662f\u5f00\u6e90\u7684\uff0c\u5b83\u88ab\u5e7f\u6cdb\u7684\u5e94\u7528\u5728linux\u5e94\u7528\u5c42\u6765\u5feb\u901f\u9a8c\u8bc1I2C\u5916\u8bbe\u662f\u5426\u53ef\u7528\uff0c\u4e3a\u6211\u4eec\u6d4b\u8bd5I2C\u8bbe\u5907\u63d0\u4f9b\u4e86\u5f88\u597d\u7684\u6377\u5f84\u3002"}),"\n",(0,s.jsxs)(n.h3,{id:"1231-\u5982\u4f55\u4f7f\u7528i2c-tools\u6d4b\u8bd5i2c\u5916\u8bbe",children:[(0,s.jsx)(n.strong,{children:"12.3.1"})," ",(0,s.jsx)(n.strong,{children:"\u5982\u4f55\u4f7f\u7528I2C tools\u6d4b\u8bd5I2C\u5916\u8bbe"})]}),"\n",(0,s.jsx)(n.h4,{id:"1-i2c-tools\u6982\u8ff0",children:"1) I2C tools\u6982\u8ff0\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\tI2C tools\u5305\u542b\u4e00\u5957\u7528\u4e8eLinux\u5e94\u7528\u5c42\u6d4b\u8bd5\u5404\u79cd\u5404\u6837I2C\u529f\u80fd\u7684\u5de5\u5177\u3002\u5b83\u7684\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a\u603b\u7ebf\u63a2\u6d4b\u5de5\u5177\u3001SMBus\u8bbf\u95ee\u5e2e\u52a9\u7a0b\u5e8f\u3001EEPROM\u89e3\u7801\u811a\u672c\u3001EEPROM\u7f16\u7a0b\u5de5\u5177\u548c\u7528\u4e8eSMBus\u8bbf\u95ee\u7684python\u6a21\u5757\u3002\u53ea\u8981\u4f60\u6240\u4f7f\u7528\u7684\u5185\u6838\u4e2d\u5305\u542bI2C\u8bbe\u5907\u9a71\u52a8\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5728\u4f60\u7684\u677f\u5b50\u4e2d\u6b63\u5e38\u4f7f\u7528\u8fd9\u4e2a\u6d4b\u8bd5\u5de5\u5177\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"2-\u4e0b\u8f7di2c-tools\u6e90\u7801",children:"2) \u4e0b\u8f7dI2C tools\u6e90\u7801\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u8bf4\u8fc7\u4e86\u8fd9\u4e2aI2C tools\u5de5\u5177\u662f\u5f00\u6e90\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6e90\u7801\u5728\u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u5462\uff1f"}),"\n",(0,s.jsxs)(n.p,{children:["\u200b\t\t\u4e0b\u8f7d\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u5728\u5185\u6838\u7684\u7f51\u7ad9",(0,s.jsx)(n.a,{href:"https://mirrors.edge.kernel.org/pub/software/utils/i2c-tools/%E4%B8%8B%E8%BD%BDI2C",children:"https://mirrors.edge.kernel.org/pub/software/utils/i2c-tools/\u4e0b\u8f7dI2C"})," tools\u4ee3\u7801\u7684\u538b\u7f29\u5305\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u8f7d\u65b9\u6cd5\u4e8c\uff1a\u5229\u7528git\u7ba1\u7406\u5de5\u5177\u4e0b\u8f7d\u8fd9\u4e2aI2C tools\u7684\u6e90\u4ee3\u7801\uff0c\u547d\u4ee4\u4e3agit clone git://git.kernel.org/pub/scm/utils/i2c-tools/i2c-tools.git\u5f3a\u70c8\u5efa\u8bae\u8bfb\u8005\u91c7\u7528\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u4e0b\u8f7d\u8fd9\u4e2a\u4ee3\u7801\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5\u901a\u8fc7git\u5feb\u901f\u5730\u4e86\u89e3\u8fd9\u4e2a\u5f00\u6e90\u4ee3\u7801\u7684\u4e0d\u540c\u7248\u672c\u7684\u529f\u80fd\u6539\u8fdb\u53cabug\u4fee\u590d\uff0c\u800c\u4e14\u4f7f\u7528git\u5f00\u53d1\u4e5f\u662f\u4f5c\u4e3a\u4e00\u540d\u4f18\u79c0\u7684\u5f00\u53d1\u4eba\u5458\u5fc5\u5907\u7684\u4e00\u9879\u6280\u80fd\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"3-\u7f16\u8bd1i2c-tools\u6e90\u7801",children:"3) \u7f16\u8bd1I2C tools\u6e90\u7801\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8fdb\u5165\u521a\u624d\u5229\u7528git\u4e0b\u8f7d\u597d\u7684iic-tools\u6e90\u7801\u76ee\u5f55\uff0c\u4fee\u6539\u7f16\u8bd1\u5de5\u5177\u4e3a\u4f60\u5f53\u524d\u4f7f\u7528\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"26  CC ?= arm-linux-gnueabihf-gcc\n27  AR ?= arm-linux-gnueabihf-ar\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7f16\u8bd1\u6e90\u7801\uff1a\u5982\u679c\u4f60\u60f3\u7f16\u8bd1\u9759\u6001\u7248\u672c\uff0c\u4f60\u53ef\u4ee5\u8f93\u5165\u547d\u4ee4\uff1amake USE_STATIC_LIB=1\uff1b\u5982\u679c\u4f7f\u7528\u52a8\u6001\u5e93\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165make\u8fdb\u884c\u7f16\u8bd1\u3002\u5b89\u88c5\u547d\u4ee4\u4e3a\uff1amake install,\u5982\u679c\u4f60\u60f3\u8981\u8ba9\u6700\u540e\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u6700\u5c0f\u7684\u8bdd\uff0c\u53ef\u4ee5\u5728\u201cmake install\u201d\u4e4b\u524d\u8fd0\u884c\u201cmake strip\u201d\u3002\u4f46\u662f\uff0c\u8fd9\u5c06\u4e0d\u80fd\u751f\u6210\u4efb\u4f55\u8c03\u8bd5\u5e93\uff0c\u4e5f\u5c31\u4e0d\u80fd\u5c1d\u8bd5\u8fdb\u4e00\u6b65\u8c03\u8bd5\u3002\u7136\u540e\u5c06tools\u76ee\u5f55\u4e0b\u76845\u4e2a\u53ef\u6267\u884c\u6587\u4ef6i2cdetect\uff0ci2cdump\uff0ci2cget\uff0ci2cset\u548ci2ctransfer\u590d\u5236\u5230\u677f\u5b50\u7684/usr/sbin/\u4e2d\uff1b\u5c06lib\u76ee\u5f55\u4e0b\u7684libi2c.so.0.1.1\u6587\u4ef6\u590d\u5236\u5230\u677f\u5b50\u7684/usr/lib/libi2c.so.0\u3002\u4e4b\u540e\u522b\u5fd8\u4e86\u5c06\u4e0a\u9762\u7684\u6587\u4ef6\u4fee\u6539\u4e3a\u53ef\u6267\u884c\u7684\u6743\u9650\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"4-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cdetect",children:"4) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cdetect"}),"\n",(0,s.jsx)(n.p,{children:"i2cdetect\u7684\u4e3b\u8981\u529f\u80fd\u5c31\u662fI2C\u8bbe\u5907\u67e5\u8be2\uff0c\u5b83\u7528\u4e8e\u626b\u63cfI2C\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u3002\u5b83\u8f93\u51fa\u4e00\u4e2a\u8868\uff0c\u5176\u4e2d\u5305\u542b\u6307\u5b9a\u603b\u7ebf\u4e0a\u68c0\u6d4b\u5230\u7684\u8bbe\u5907\u7684\u5217\u8868\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u8be5\u547d\u4ee4\u7684\u5e38\u7528\u683c\u5f0f\u4e3a\uff1a",(0,s.jsx)(n.code,{children:"i2cdetect [-y] [-a] [-q|-r] i2cbus [first last]"}),"\u3002\u5177\u4f53\u53c2\u6570\u7684\u542b\u4e49\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"-y"}),(0,s.jsx)(n.th,{children:"\u53d6\u6d88\u4ea4\u4e92\u6a21\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cdetect\u5c06\u7b49\u5f85\u7528\u6237\u7684\u786e\u8ba4\uff0c  \u5f53\u4f7f\u7528\u6b64\u6807\u5fd7\u65f6\uff0c\u5b83\u5c06\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-a"}),(0,s.jsx)(n.td,{children:"\u5f3a\u5236\u626b\u63cf\u975e\u89c4\u5219\u5730\u5740\u3002\u4e00\u822c\u4e0d\u63a8\u8350\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-q"}),(0,s.jsx)(n.td,{children:"\u4f7f\u7528SMBus\u201c\u5feb\u901f\u5199\u5165\u201d\u547d\u4ee4\u8fdb\u884c\u63a2\u6d4b\u3002\u4e00\u822c\u4e0d\u63a8\u8350\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-r"}),(0,s.jsx)(n.td,{children:"\u4f7f\u7528SMBus\u201c\u63a5\u6536\u5b57\u8282\u201d\u547d\u4ee4\u8fdb\u884c\u63a2\u6d4b\u3002\u4e00\u822c\u4e0d\u63a8\u8350\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-F"}),(0,s.jsx)(n.td,{children:"\u663e\u793a\u9002\u914d\u5668\u5b9e\u73b0\u7684\u529f\u80fd\u5217\u8868\u5e76\u9000\u51fa\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-V"}),(0,s.jsx)(n.td,{children:"\u663e\u793aI2C\u5de5\u5177\u7684\u7248\u672c\u5e76\u63a8\u51fa\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-l"}),(0,s.jsx)(n.td,{children:"\u663e\u793a\u5df2\u7ecf\u5728\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684I2C\u603b\u7ebf\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"i2cbus"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u8981\u626b\u63cf\u7684I2C\u603b\u7ebf\u7684\u7f16\u53f7\u6216\u540d\u79f0\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"first last"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u8981\u626b\u63cf\u7684\u4ece\u8bbe\u5907\u5730\u5740\u8303\u56f4\u3002"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8be5\u529f\u80fd\u7684\u5e38\u7528\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e00\uff0c\u5148\u901a\u8fc7i2cdetect -l\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684I2C\u7684\u603b\u7ebf\u60c5\u51b5\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image008.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:'\u200b\t\t\u7b2c\u4e8c\uff0c\u82e5\u603b\u7ebf\u4e0a\u6302\u8f7dI2C\u4ece\u8bbe\u5907\uff0c\u53ef\u901a\u8fc7i2cdetect\u626b\u63cf\u67d0\u4e2aI2C\u603b\u7ebf\u4e0a\u7684\u6240\u6709\u8bbe\u5907\u3002\u53ef\u901a\u8fc7\u63a7\u5236\u53f0\u8f93\u5165i2cdetect -y 1\uff1a\uff08\u5176\u4e2d"--"\u8868\u793a\u5730\u5740\u88ab\u63a2\u6d4b\u5230\u4e86\uff0c\u4f46\u6ca1\u6709\u82af\u7247\u5e94\u7b54\uff1b "UU"\u56e0\u4e3a\u8fd9\u4e2a\u5730\u5740\u76ee\u524d\u6b63\u5728\u88ab\u4e00\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\uff0c\u63a2\u6d4b\u88ab\u7701\u7565\uff1b\u800c16\u8fdb\u5236\u7684\u5730\u5740\u53f760\uff0c1e\u548c50\u5219\u8868\u793a\u53d1\u73b0\u4e86\u4e00\u4e2a\u5916\u90e8\u7247\u9009\u4ece\u5730\u5740\u4e3a0x60\uff0c0x1e\uff08AP3216\uff09\u548c0x50(eeprom)\u7684\u5916\u8bbe\u82af\u7247\u3002'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image009.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image010.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e09\uff0c\u67e5\u8be2I2C\u603b\u7ebf1 (I2C -1)\u7684\u529f\u80fd\uff0c\u547d\u4ee4\u4e3ai2cdetect -F 1\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image011.png",alt:""})}),"\n",(0,s.jsx)(n.h4,{id:"5-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cget",children:"5) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cget"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cget\u7684\u4e3b\u8981\u529f\u80fd\u662f\u83b7\u53d6I2C\u5916\u8bbe\u67d0\u4e00\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3002\u8be5\u547d\u4ee4\u7684\u5e38\u7528\u683c\u5f0f\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cget [-f] [-y] [-a] i2cbus chip-address [data-address [mode]]\u3002\u5177\u4f53\u53c2\u6570\u7684\u542b\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"-f"}),(0,s.jsx)(n.th,{children:"\u5f3a\u5236\u8bbf\u95ee\u8bbe\u5907\uff0c\u5373\u4f7f\u5b83\u5df2\u7ecf\u5f88\u5fd9\u3002  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cget\u5c06\u62d2\u7edd\u8bbf\u95ee  \u5df2\u7ecf\u5728\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u4e0b\u7684\u8bbe\u5907\u3002"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-y"}),(0,s.jsxs)(n.td,{children:["\u53d6\u6d88\u4ea4\u4e92\u6a21\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cdetect\u5c06\u7b49\u5f85\u7528\u6237\u7684\u786e\u8ba4\uff0c\u5f53\u4f7f\u7528\u6b64",(0,s.jsx)("br",{}),"  \u6807\u5fd7\u65f6\uff0c\u5b83\u5c06\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-a"}),(0,s.jsx)(n.td,{children:"\u5141\u8bb8\u57280x00 - 0x07\u548c0x78 - 0x7f\u4e4b\u95f4\u4f7f\u7528\u5730\u5740\u3002\u4e00\u822c\u4e0d\u63a8\u8350\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"i2cbus"}),(0,s.jsxs)(n.td,{children:["\u8868\u793a\u8981\u626b\u63cf\u7684I2C\u603b\u7ebf\u7684\u7f16\u53f7\u6216\u540d\u79f0\u3002\u8fd9\u4e2a\u6570\u5b57\u5e94\u8be5\u4e0ei2cdetect  -l\u5217\u51fa",(0,s.jsx)("br",{}),"  \u7684\u603b\u7ebf\u4e4b\u4e00\u76f8\u5bf9\u5e94\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"chip-address"}),(0,s.jsx)(n.td,{children:"\u8981\u64cd\u4f5c\u7684\u5916\u8bbe\u4ece\u5730\u5740\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"data-address"}),(0,s.jsx)(n.td,{children:"\u88ab\u67e5\u770b\u5916\u8bbe\u7684\u5bc4\u5b58\u5668\u5730\u5740\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"mode"}),(0,s.jsxs)(n.td,{children:["\u663e\u793a\u6570\u636e\u7684\u65b9\u5f0f\uff1a  b (read byte data, default)  w (read word data) ",(0,s.jsx)("br",{}),"  c (write byte/read byte)"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u9762\u662f\u5b8c\u6210\u8bfb\u53d60\u603b\u7ebf\u4e0a\u4ece\u5730\u5740\u4e3a0x50\u7684\u5916\u8bbe\u76840x10\u5bc4\u5b58\u5668\u7684\u6570\u636e\uff0c\u547d\u4ee4\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cget -y -f 0 0x50 0x10"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image012.png",alt:""})}),"\n",(0,s.jsx)(n.h4,{id:"6-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cdump",children:"6) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cdump"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cdump\u7684\u4e3b\u8981\u529f\u80fd\u67e5\u770bI2C\u4ece\u8bbe\u5907\u5668\u4ef6\u6240\u6709\u5bc4\u5b58\u5668\u7684\u503c\u3002 \u8be5\u547d\u4ee4\u7684\u5e38\u7528\u683c\u5f0f\u4e3a\uff1ai2cdump [-f] [-r first-last] [-y] [-a] i2cbus address [mode [bank [bankreg]]]\u3002\u5177\u4f53\u53c2\u6570\u7684\u542b\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"-f"}),(0,s.jsxs)(n.th,{children:["\u5f3a\u5236\u8bbf\u95ee\u8bbe\u5907\uff0c\u5373\u4f7f\u5b83\u5df2\u7ecf\u5f88\u5fd9\u3002  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cget\u5c06\u62d2\u7edd\u8bbf\u95ee\u5df2\u7ecf\u5728",(0,s.jsx)("br",{}),"\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u4e0b\u7684\u8bbe\u5907\u3002"]})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-r"}),(0,s.jsxs)(n.td,{children:["\u9650\u5236\u6b63\u5728\u8bbf\u95ee\u7684\u5bc4\u5b58\u5668\u8303\u56f4\u3002 \u6b64\u9009\u9879\u4ec5\u5728\u6a21\u5f0fb\uff0cw\uff0cc\u548cW\u4e2d\u53ef\u7528\u3002\u5bf9\u4e8e",(0,s.jsx)("br",{}),"\u6a21\u5f0fW\uff0cfirst\u5fc5\u987b\u662f\u5076\u6570\uff0clast\u5fc5\u987b\u662f\u5947\u6570\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-y"}),(0,s.jsxs)(n.td,{children:["\u53d6\u6d88\u4ea4\u4e92\u6a21\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cdetect\u5c06\u7b49\u5f85\u7528\u6237\u7684\u786e\u8ba4\uff0c\u5f53\u4f7f\u7528\u6b64\u6807\u5fd7",(0,s.jsx)("br",{}),"\u65f6\uff0c\u5b83\u5c06\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-V"}),(0,s.jsx)(n.td,{children:"\u663e\u793aI2C\u5de5\u5177\u7684\u7248\u672c\u5e76\u63a8\u51fa\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"i2cbus"}),(0,s.jsxs)(n.td,{children:["\u8868\u793a\u8981\u626b\u63cf\u7684I2C\u603b\u7ebf\u7684\u7f16\u53f7\u6216\u540d\u79f0\u3002\u8fd9\u4e2a\u6570\u5b57\u5e94\u8be5\u5bf9\u5e94\u4e8ei2cdetect  -l\u5217",(0,s.jsx)("br",{}),"\u51fa\u7684\u603b\u7ebf\u4e4b\u4e00\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"first last"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u8981\u626b\u63cf\u7684\u4ece\u8bbe\u5907\u5730\u5740\u8303\u56f4\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"mode"}),(0,s.jsxs)(n.td,{children:["b: \u5355\u4e2a\u5b57\u8282  w\uff1a16\u4f4d\u5b57  s\uff1aSMBus\u6a21\u5757  i\uff1aI2C\u6a21\u5757\u7684\u8bfb\u53d6\u5927\u5c0f  c: \u8fde\u7eed\u8bfb",(0,s.jsx)("br",{}),"\u53d6\u6240\u6709\u5b57\u8282\uff0c\u5bf9\u4e8e\u5177\u6709\u5730\u5740\u81ea\u52a8\u9012\u589e\u529f\u80fd\u7684\u82af\u7247\uff08\u5982EEPROM\uff09\u975e\u5e38\u6709\u7528\u3002",(0,s.jsx)("br",{}),"W\u4e0e w\u7c7b\u4f3c\uff0c\u53ea\u662f\u8bfb\u547d\u4ee4\u53ea\u80fd\u5728\u5076\u6570\u5bc4\u5b58\u5668\u5730\u5740\u4e0a\u53d1\u51fa;\u8fd9\u4e5f\u662f\u4e3b\u8981\u7528\u4e8eEEPROM\u7684\u3002"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u9762\u662f\u5b8c\u6210\u8bfb\u53d60\u603b\u7ebf\u4e0a\u4ece\u5730\u5740\u4e3a0x50\u7684eeprom\u7684\u6570\u636e\uff0c\u547d\u4ee4\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cdump -f -y 0 0x50"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image013.png",alt:""})}),"\n",(0,s.jsx)(n.h4,{id:"7-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2cset",children:"7) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2cset"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cset\u7684\u4e3b\u8981\u529f\u80fd\u662f\u901a\u8fc7I2C\u603b\u7ebf\u8bbe\u7f6e\u8bbe\u5907\u4e2d\u67d0\u5bc4\u5b58\u5668\u7684\u503c\u3002\u8be5\u547d\u4ee4\u7684\u5e38\u7528\u683c\u5f0f\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cset [-f] [-y] [-m mask] [-r] i2cbus chip-address data-address [value] ...[mode]"}),"\n",(0,s.jsx)(n.p,{children:"\u5177\u4f53\u53c2\u6570\u7684\u542b\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"-f"}),(0,s.jsxs)(n.th,{children:["\u5f3a\u5236\u8bbf\u95ee\u8bbe\u5907\uff0c\u5373\u4f7f\u5b83\u5df2\u7ecf\u5f88\u5fd9\u3002  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cget\u5c06\u62d2\u7edd\u8bbf\u95ee\u5df2",(0,s.jsx)("br",{}),"\u7ecf\u5728\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u4e0b\u7684\u8bbe\u5907\u3002"]})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-r"}),(0,s.jsx)(n.td,{children:"\u5728\u5199\u5165\u503c\u4e4b\u540e\u7acb\u5373\u8bfb\u53d6\u5b83\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u5199\u5165\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-y"}),(0,s.jsxs)(n.td,{children:["\u53d6\u6d88\u4ea4\u4e92\u6a21\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cdetect\u5c06\u7b49\u5f85\u7528\u6237\u7684\u786e\u8ba4\uff0c\u5f53\u4f7f\u7528\u6b64\u6807",(0,s.jsx)("br",{}),"\u5fd7\u65f6\uff0c\u5b83\u5c06\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-V"}),(0,s.jsx)(n.td,{children:"\u663e\u793aI2C\u5de5\u5177\u7684\u7248\u672c\u5e76\u63a8\u51fa\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"i2cbus"}),(0,s.jsxs)(n.td,{children:["\u8868\u793a\u8981\u626b\u63cf\u7684I2C\u603b\u7ebf\u7684\u7f16\u53f7\u6216\u540d\u79f0\u3002\u8fd9\u4e2a\u6570\u5b57\u5e94\u8be5\u5bf9\u5e94\u4e8ei2cdetect -l\u5217",(0,s.jsx)("br",{}),"\u51fa\u7684\u603b\u7ebf\u4e4b\u4e00\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-m mask"}),(0,s.jsxs)(n.td,{children:["\u5982\u679c\u6307\u5b9amask\u53c2\u6570\uff0c\u90a3\u4e48\u63cf\u8ff0\u54ea\u4e9bvalue\u4f4d\u5c06\u662f\u5b9e\u9645\u5199\u5165data-addres\u7684\u3002",(0,s.jsx)("br",{}),"\u63a9\u7801\u4e2d\u8bbe\u7f6e\u4e3a1\u7684\u4f4d\u5c06\u4ece\u503c\u4e2d\u53d6\u51fa\uff0c\u800c\u8bbe\u7f6e\u4e3a0\u7684\u4f4d\u5c06\u4ece\u6570\u636e\u5730\u5740\u4e2d\u8bfb\u53d6\uff0c\u4ece",(0,s.jsx)("br",{}),"\u800c\u7531\u64cd\u4f5c\u4fdd\u5b58\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"mode"}),(0,s.jsxs)(n.td,{children:["b: \u5355\u4e2a\u5b57\u8282  w\uff1a16\u4f4d\u5b57  s\uff1aSMBus\u6a21\u5757  i\uff1aI2C\u6a21\u5757\u7684\u8bfb\u53d6\u5927\u5c0f  c: \u8fde\u7eed\u8bfb",(0,s.jsx)("br",{}),"\u53d6\u6240\u6709\u5b57\u8282\uff0c\u5bf9\u4e8e\u5177\u6709\u5730\u5740\u81ea\u52a8\u9012\u589e\u529f\u80fd\u7684\u82af\u7247\uff08\u5982EEPROM\uff09\u975e\u5e38\u6709\u7528\u3002",(0,s.jsx)("br",{}),"  W\u4e0e w\u7c7b\u4f3c\uff0c\u53ea\u662f\u8bfb\u547d\u4ee4\u53ea\u80fd\u5728\u5076\u6570\u5bc4\u5b58\u5668\u5730\u5740\u4e0a\u53d1\u51fa;\u8fd9\u4e5f\u662f\u4e3b\u8981\u7528\u4e8e",(0,s.jsx)("br",{}),"EEPROM\u7684\u3002"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u9762\u662f\u5b8c\u6210\u54110\u603b\u7ebf\u4e0a\u4ece\u5730\u5740\u4e3a0x50\u7684eeprom\u76840x10\u5bc4\u5b58\u5668\u5199\u51650x55\uff0c\u547d\u4ee4\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2cset -y -f 0 0x50 0x10 0x55"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7136\u540e\u7528i2cget\u8bfb\u53d60\u603b\u7ebf\u4e0a\u4ece\u5730\u5740\u4e3a0x50\u7684eeprom\u76840x10\u5bc4\u5b58\u5668\u7684\u6570\u636e\uff0c\u547d\u4ee4\u4e3a\uff1ai2cget -y -f 0 0x50 0x10"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image014.png",alt:""})}),"\n",(0,s.jsx)(n.h4,{id:"8-\u4ecb\u7ecdi2c-tools\u5404\u529f\u80fd\u4e4bi2ctransfer",children:"8) \u4ecb\u7ecdI2C tools\u5404\u529f\u80fd\u4e4b\u2014i2ctransfer"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2ctransfer\u7684\u4e3b\u8981\u529f\u80fd\u662f\u5728\u4e00\u6b21\u4f20\u8f93\u4e2d\u53d1\u9001\u7528\u6237\u5b9a\u4e49\u7684I2C\u6d88\u606f\u3002i2ctransfer\u662f\u4e00\u4e2a\u521b\u5efaI2C\u6d88\u606f\u5e76\u5c06\u5176\u5408\u5e76\u4e3a\u4e00\u4e2a\u4f20\u8f93\u53d1\u9001\u7684\u7a0b\u5e8f\u3002\u5bf9\u4e8e\u8bfb\u6d88\u606f\uff0c\u63a5\u6536\u7f13\u51b2\u533a\u7684\u5185\u5bb9\u88ab\u6253\u5370\u5230stdout\uff0c\u6bcf\u4e2a\u8bfb\u6d88\u606f\u4e00\u884c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8be5\u547d\u4ee4\u7684\u5e38\u7528\u683c\u5f0f\u4e3a\uff1ai2ctransfer [-f] [-y] [-v] [-a] i2cbus desc [data] [desc [data]]"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5177\u4f53\u53c2\u6570\u7684\u542b\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"-f"}),(0,s.jsxs)(n.th,{children:["\u5f3a\u5236\u8bbf\u95ee\u8bbe\u5907\uff0c\u5373\u4f7f\u5b83\u5df2\u7ecf\u5f88\u5fd9\u3002  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cget\u5c06\u62d2\u7edd\u8bbf\u95ee\u5df2",(0,s.jsx)("br",{}),"\u7ecf\u5728\u5185\u6838\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u4e0b\u7684\u8bbe\u5907\u3002"]})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-y"}),(0,s.jsxs)(n.td,{children:["\u53d6\u6d88\u4ea4\u4e92\u6a21\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ci2cdetect\u5c06\u7b49\u5f85\u7528\u6237\u7684\u786e\u8ba4\uff0c\u5f53\u4f7f\u7528\u6b64",(0,s.jsx)("br",{}),"\u6807\u5fd7\u65f6\uff0c\u5b83\u5c06\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-v"}),(0,s.jsx)(n.td,{children:"\u542f\u7528\u8be6\u7ec6\u8f93\u51fa\u3002\u5b83\u5c06\u6253\u5370\u6240\u6709\u4fe1\u606f\u53d1\u9001\uff0c\u5373\u4e0d\u4ec5\u4e3a\u8bfb\u6d88\u606f\uff0c\u4e5f\u4e3a\u5199\u6d88\u606f\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-V"}),(0,s.jsx)(n.td,{children:"\u663e\u793aI2C\u5de5\u5177\u7684\u7248\u672c\u5e76\u63a8\u51fa\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-a"}),(0,s.jsx)(n.td,{children:"\u5141\u8bb8\u57280x00 - 0x02\u548c0x78 - 0x7f\u4e4b\u95f4\u4f7f\u7528\u5730\u5740\u3002\u4e00\u822c\u4e0d\u63a8\u8350\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"i2cbus"}),(0,s.jsxs)(n.td,{children:["\u8868\u793a\u8981\u626b\u63cf\u7684I2C\u603b\u7ebf\u7684\u7f16\u53f7\u6216\u540d\u79f0\u3002\u8fd9\u4e2a\u6570\u5b57\u5e94\u8be5\u5bf9\u5e94\u4e8ei2cdetect -l",(0,s.jsx)("br",{}),"\u5217\u51fa\u7684\u603b\u7ebf\u4e4b\u4e00\u3002"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0b\u9762\u662f\u5b8c\u6210\u54110\u603b\u7ebf\u4e0a\u4ece\u5730\u5740\u4e3a0x50\u7684eeprom\u76840x20\u5f00\u59cb\u76844\u4e2a\u5bc4\u5b58\u5668\u5199\u51650x01\uff0c0x02\uff0c0x03\uff0c0x04\u547d\u4ee4\u4e3a\uff1ai2ctransfer -f -y 0 w5@0x50 0x20 0x01 0x02 0x03 0x04\u7136\u540e\u518d\u901a\u8fc7\u547d\u4ee4i2ctransfer -f -y 0 w1@0x50 0x20 r4\u5c060x20\u5730\u5740\u76844\u4e2a\u5bc4\u5b58\u5668\u6570\u636e\u8bfb\u51fa\u6765\uff0c\u89c1\u4e0b\u56fe\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image015.png",alt:""})}),"\n",(0,s.jsxs)(n.h3,{id:"1232-\u5728linux\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bfb\u5199i2c\u5916\u8bbe",children:[(0,s.jsx)(n.strong,{children:"12.3.2"})," ",(0,s.jsx)(n.strong,{children:"\u5728linux\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bfb\u5199I2C\u5916\u8bbe"})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u9996\u5148\u901a\u8fc7\u524d\u9762\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u7ad9\u5728cpu\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u64cd\u4f5cI2C\u5916\u8bbe\u5b9e\u9645\u4e0a\u5c31\u662f\u901a\u8fc7\u63a7\u5236cpu\u4e2d\u6302\u8f7d\u8be5I2C\u5916\u8bbe\u7684I2C\u63a7\u5236\u5668\uff0c\u800c\u8fd9\u4e2aI2C\u63a7\u5236\u5668\u5728linux\u7cfb\u7edf\u4e2d\u88ab\u79f0\u4e3a\u201cI2C\u9002\u914d\u5668\u201d\uff0c\u8fd9\u4e2a\u5df2\u7ecf\u5728\u9a71\u52a8\u7b80\u4ecb\u4e2d\u4ecb\u7ecd\u8fc7\u4e86\u3002\u800c\u4e14\u4f17\u6240\u5468\u77e5\uff0c\u5728linux\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8bbe\u5907\u90fd\u662f\u4ee5\u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u5728\u7684\uff0c\u6240\u4ee5\u5728linux\u4e2d\u64cd\u4f5cI2C\u5916\u8bbe\u5c31\u53d8\u6210\u4e86\u64cd\u4f5cI2C\u9002\u914d\u5668\u8bbe\u5907\u6587\u4ef6\u3002Linux\u7cfb\u7edf\uff08\u4e5f\u5c31\u662f\u5185\u6838\uff09\u4e3a\u6bcf\u4e2aI2C\u9002\u914d\u5668\u751f\u6210\u4e86\u4e00\u4e2a\u4e3b\u8bbe\u5907\u53f7\u4e3a89\u7684\u8bbe\u5907\u8282\u70b9\uff08\u6b21\u8bbe\u5907\u53f7\u4e3a0-255\uff09\uff0c\u5b83\u5e76\u6ca1\u6709\u9488\u5bf9\u7279\u5b9a\u7684I2C\u5916\u8bbe\u800c\u8bbe\u8ba1\uff0c\u53ea\u662f\u63d0\u4f9b\u4e86\u901a\u7528\u7684read(),write(),\u548cioctl()\u7b49\u6587\u4ef6\u64cd\u4f5c\u63a5\u53e3\uff0c\u5728\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u5c42\u5c31\u53ef\u4ee5\u501f\u7528\u8fd9\u4e9b\u63a5\u53e3\u8bbf\u95ee\u6302\u63a5\u5728\u9002\u914d\u5668\u4e0a\u7684I2C\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u6216\u5bc4\u5b58\u5668\uff0c\u5e76\u63a7\u5236I2C\u8bbe\u5907\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u64cd\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"1--\u786e\u5b9ai2c\u9002\u914d\u5668\u7684\u8bbe\u5907\u6587\u4ef6\u8282\u70b9",children:"1)  \u786e\u5b9aI2C\u9002\u914d\u5668\u7684\u8bbe\u5907\u6587\u4ef6\u8282\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\ti2c\u9002\u914d\u5668\u7684\u8bbe\u5907\u8282\u70b9\u662f/dev/i2c-x\uff0c\u5176\u4e2dx\u662f\u6570\u5b57\u3002\u7531\u4e8e\u9002\u914d\u5668\u7f16\u53f7\u662f\u52a8\u6001\u5206\u914d\u7684\uff08\u548c\u6ce8\u518c\u6b21\u5e8f\u6709\u5173\uff09\uff0c\u6240\u4ee5\u60f3\u4e86\u89e3\u54ea\u4e00\u4e2a\u9002\u914d\u5668\u5bf9\u5e94\u4ec0\u4e48\u7f16\u53f7\uff0c\u53ef\u4ee5\u67e5\u770b/sys/class/i2c-dev/\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5185\u5bb9\uff08\u5728\u8fd9\u91cc\u7b14\u8005\u5f3a\u70c8\u5efa\u8bae\u8bfb\u8005\u597d\u597d\u5229\u7528\u597dsys\u6587\u4ef6\u7cfb\u7edf\uff09\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"cat /sys/class/i2c-dev/i2c-0/name\ncat /sys/class/i2c-dev/i2c-1/name\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image016.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7136\u540e\u67e5\u770b\u786c\u4ef6\u539f\u7406\u56fe\u4e2deeprom\u662f\u6302\u5728cpu\u7684i2c1\u63a7\u5236\u5668\u4e2d\u4e86\uff0c\u7136\u540e\u67e5\u770bIMX6UL\u82af\u7247\u624b\u518c\u4e2dI2C1\u7684\u5bc4\u5b58\u5668\u5730\u5740\u4e3a21A_0000\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/IIC_Image017.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u6bd4\u5bf9\u540e\uff0c\u6211\u4eec\u5c31\u5f88\u5bb9\u6613\u77e5\u9053eeprom\u5916\u8bbe\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u7684\u8bbe\u5907\u8282\u70b9\u4e3a\uff1a/dev/i2c-0\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"2-\u6253\u5f00\u9002\u914d\u5668\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9",children:"2) \u6253\u5f00\u9002\u914d\u5668\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5f53\u7528\u6237\u6253\u5f00\u9002\u914d\u5668\u8bbe\u5907\u8282\u70b9\u7684\u65f6\u5019\uff0cKernel\u4e2d\u7684i2c-dev\u4ee3\u7801\u4e3a\u5176\u5efa\u7acb\u4e00\u4e2ai2c_client\uff0c\u4f46\u662f\u8fd9\u4e2ai2c_client\u5e76\u4e0d\u52a0\u5230i2c_adapter\u7684client\u94fe\u8868\u5f53\u4e2d\u3002\u5f53\u7528\u6237\u5173\u95ed\u8bbe\u5907\u8282\u70b9\u65f6\uff0c\u5b83\u81ea\u52a8\u88ab\u91ca\u653e\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"3-ioctl\u63a7\u5236",children:"3) IOCTL\u63a7\u5236"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u8fd9\u4e2a\u53ef\u4ee5\u53c2\u8003\u5185\u6838\u6e90\u7801\u4e2d\u7684include/linux/i2c-dev.h\u6587\u4ef6\u3002\u4e0b\u9762\u4e3e\u4f8b\u8bf4\u660e\u4e3b\u8981\u7684IOCTL\u547d\u4ee4\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"I2C_SLAVE_FORCE"}),(0,s.jsx)(n.th,{children:"\u8bbe\u7f6eI2C\u4ece\u8bbe\u5907\u5730\u5740\uff08\u53ea\u6709\u5728\u8be5\u5730\u5740\u7a7a\u95f2\u7684\u60c5\u51b5\u4e0b\u6210\u529f\uff09"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_SLAVE_FORCE"}),(0,s.jsxs)(n.td,{children:["\u5f3a\u5236\u8bbe\u7f6eI2C\u4ece\u8bbe\u5907\u5730\u5740\uff08\u65e0\u8bba\u5185\u6838\u4e2d\u662f\u5426\u5df2\u6709\u9a71\u52a8\u5728\u4f7f\u7528",(0,s.jsx)("br",{}),"\u8fd9\u4e2a\u5730\u5740\u90fd\u4f1a\u6210\u529f\uff09"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_TENBIT"}),(0,s.jsxs)(n.td,{children:["\u9009\u62e9\u5730\u5740\u4f4d\u957f:  0 \u8868\u793a\u662f7bit\u5730\u5740 \uff1b  \u4e0d\u7b49\u4e8e0 \u5c31\u662f10 bit\u7684",(0,s.jsx)("br",{}),"\u5730\u5740\u3002\u53ea\u6709\u9002\u914d\u5668\u652f\u6301I2C_FUNC_10BIT_ADDR\uff0c\u8fd9\u4e2a\u8bf7\u6c42\u624d\u662f\u6709\u6548\u7684\u3002"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_FUNCS"}),(0,s.jsx)(n.td,{children:"\u83b7\u53d6\u9002\u914d\u5668\u652f\u6301\u7684\u529f\u80fd\uff0c\u8be6\u7ec6\u7684\u53ef\u4ee5\u53c2\u8003\u6587\u4ef6include/linux/i2c.h"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_RDWR"}),(0,s.jsx)(n.td,{children:"\u8bbe\u7f6e\u4e3a\u53ef\u8bfb\u5199"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_RETRIES"}),(0,s.jsx)(n.td,{children:"\u8bbe\u7f6e\u6536\u4e0d\u5230ACK\u65f6\u7684\u91cd\u8bd5\u6b21\u6570"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_TIMEOUT"}),(0,s.jsx)(n.td,{children:"\u8bbe\u7f6e\u8d85\u65f6\u7684\u65f6\u9650"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"4-\u4f7f\u7528i2c\u534f\u8bae\u548c\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1",children:"4) \u4f7f\u7528I2C\u534f\u8bae\u548c\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4ee3\u7801\u4e3a\uff1aioctl(file,I2C_RDWR,(struct i2c_rdwr_ioctl_data *)msgset); \u5b83\u53ef\u4ee5\u8fdb\u884c\u8fde\u7eed\u7684\u8bfb\u5199\uff0c\u4e2d\u95f4\u6ca1\u6709\u95f4\u6b47\u3002\u53ea\u6709\u5f53\u9002\u914d\u5668\u652f\u6301I2C_FUNC_I2C\u6b64\u547d\u4ee4\u624d\u6709\u6548\u3002\u53c2\u6570msgset\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u4e00\u4e2ai2c_rdwr_ioctl_data\u7c7b\u578b\u7684\u7ed3\u6784\u4f53\uff0c\u8be5\u7ed3\u6784\u4f53\u7684\u529f\u80fd\u5c31\u662f\u8ba9\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5411\u5185\u6838\u4f20\u9012\u6d88\u606f\uff0c\u5176\u6210\u5458\u5305\u62ec\uff1astruct i2c_msg __ user *msgs; \u548c\u8868\u793ai2c_msgs \u4e2a\u6570\u7684 __u32 nmsgs\uff0c\u5b83\u4e5f\u51b3\u5b9a\u4e86\u5728\u786c\u4ef6I2C\u603b\u7ebf\u7684\u786c\u4ef6\u901a\u4fe1\u4e2d\u6709\u591a\u5c11\u4e2a\u5f00\u59cb\u4fe1\u53f7\u3002\u7531\u4e8eI2C\u9002\u914d\u5668\u4e0e\u5916\u8bbe\u901a\u4fe1\u662f\u4ee5\u6d88\u606f\u4e3a\u5355\u4f4d\u7684\uff0c\u6240\u4ee5struct i2c_msg\u5bf9\u6211\u4eec\u6765\u8bf4\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u5b83\u53ef\u4ee5\u5305\u542b\u591a\u6761\u6d88\u606f\uff0c\u800c\u4e00\u6761\u6d88\u606f\u6709\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u6570\u636e\uff0c\u6bd4\u5982\u5bf9\u4e8eeeprom\u9875\u5199\u5c31\u5305\u542b\u591a\u4e2a\u6570\u636e\u3002\u4e0b\u9762\u5c31\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e2a\u7ed3\u6784\u4f53\u7684\u5185\u5bb9\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"__u16 addr;"}),(0,s.jsx)(n.th,{children:"\u4ece\u8bbe\u5907\u5730\u5740"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"__u16 flags;"}),(0,s.jsx)(n.td,{children:"\u6807\u5fd7\uff08\u8bfb/\u5199\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_TEN"}),(0,s.jsx)(n.td,{children:"\u8fd9\u662f\u4e00\u4e2a10\u4f4d\u82af\u7247\u5730\u5740"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_RD"}),(0,s.jsx)(n.td,{children:"\u4ece\u8bbe\u5907\u5230\u9002\u914d\u5668\u8bfb\u6570\u636e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_NOSTART"}),(0,s.jsx)(n.td,{children:"\u4e0d\u53d1\u9001\u8d77\u59cb\u4f4d"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_REV_DIR_ADDR"}),(0,s.jsx)(n.td,{children:"\u7ffb\u8f6c\u8bfb\u5199\u6807\u5fd7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_IGNORE_NAK"}),(0,s.jsx)(n.td,{children:"\u5ffd\u7565I2C\u7684NACK\u4fe1\u53f7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_NO_RD_ACK"}),(0,s.jsx)(n.td,{children:"\u8bfb\u64cd\u4f5c\u7684\u65f6\u5019\u4e0d\u53d1ACK\u4fe1\u53f7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"I2C_M_RECV_LEN"}),(0,s.jsx)(n.td,{children:"\u7b2c\u4e00\u6b21\u63a5\u6536\u6570\u636e\u7684\u957f\u5ea6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"__u16 len;"}),(0,s.jsx)(n.td,{children:"\u5199\u5165\u6216\u8005\u8bfb\u51fa\u6570\u636e\u7684\u4e2a\u6570\uff08\u5b57\u8282\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"__u8 *buf;"}),(0,s.jsx)(n.td,{children:"\u5199\u5165\u6216\u8005\u8bfb\u51fa\u6570\u636e\u7684\u5730\u5740 buf[0]\u3002  \u6ce8\u610f\uff1a\u5343\u4e07\u4e0d\u8981\u5fd8\u8bb0\u7ed9  2c_rdwr_ioctl_data\u7ed3\u6784\u4f53\u4e2d\u7684\u6700\u91cd\u8981\u7684\u7ed3\u6784i2c_msg\u4e2d\u7684buf\u5206\u914d\u5185\u5b58\u3002"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"5-\u7528read\u548cwrite\u8bfb\u5199i2c\u8bbe\u5907",children:"5) \u7528read\u548cwrite\u8bfb\u5199I2C\u8bbe\u5907"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5f53\u7136\u4f60\u53ef\u4ee5\u4f7f\u7528read()/write()\u6765\u4e0eI2C\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1\uff0c\u4ee3\u7801\u5982\u4e0b\uff08\u4ee5eeprom\u4e3a\u4f8b\u7b80\u8981\u6982\u8ff0\u64cd\u4f5c\u8fc7\u7a0b\uff09\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["\u200b\t\t\u7b2c\u4e00\uff0c\u6253\u5f00I2C\u63a7\u5236\u5668\u6587\u4ef6\u8282\u70b9:",(0,s.jsx)(n.code,{children:" fd =open(\u201c/dev/i2c-0\u201d, O_RDWR);"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u200b\t\t\u7b2c\u4e8c\uff0c\u8bbe\u7f6eeeprom\u7684\u8bbe\u5907\u5730\u5740\uff1a",(0,s.jsx)(n.code,{children:"ioctl(fd,I2C_SLAVE, 0x50);"})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e09\uff0c\u5411eeprom\u5199\u6570\u636e:"}),"\n",(0,s.jsxs)(n.p,{children:["\u9996\u5148\u5c06\u8981\u64cd\u4f5c\u7684eeprom\u7684\u7b2c\u4e00\u4e2a\u5bc4\u5b58\u5668\u5730\u5740\u8d4b\u7ed9\u5199buf\u7684\u7b2c0\u4e2a\u5143\u7d20",(0,s.jsx)(n.code,{children:"wr_buf[0] = 0x10;"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u7136\u540e\u628a\u8981\u5199\u5165\u7684\u6570\u636e\u5199\u5165\u5230\u540e\u9762\u7684buf\u4e2d",(0,s.jsx)(n.code,{children:"for(i=1;i<13;i++) wr_buf[i]=i;"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u6700\u540e\u901a\u8fc7write\u51fd\u6570\u5b8c\u6210\u5411eeprom\u5199\u6570\u636e\u7684\u529f\u80fd\uff1a",(0,s.jsx)(n.code,{children:"write(fd, wr_buf, 13);"})]}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u6700\u540e\u5ef6\u8fdf1\u79d2\uff0c\u8ba9\u540e\u9762\u7684\u64cd\u4f5c\u4e0e\u4e0a\u9762\u7684\u5199\u64cd\u4f5c\u5206\u5f00\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u56db\uff0c\u4eceeeprom\u8bfb\u6570\u636e\uff1a\n\u9996\u5148\u548c\u5199\u64cd\u4f5c\u4e00\u6837\uff0c\u5c06\u8981\u64cd\u4f5c\u7684\u5bc4\u5b58\u5668\u9996\u5730\u57400x10\u53d1\u7ed9eeprom\uff1awrite(fd, wr_buf, 1);\n\u4ece0x10\u5bc4\u5b58\u5668\u5730\u5740\u5904\u8bfb\u53d612\u4e2a\u5b57\u8282\u7684\u6570\u636e\uff1aret=read(fd, rd_buf, 12);"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4f60\u4f1a\u53d1\u73b0\uff0c\u7528read\u548cwrite\u4e00\u6b21\u53ea\u80fd\u8fdb\u884c\u4e00\u4e2a\u65b9\u5411\u7684\u4f20\u8f93\uff1a\u6216\u8005\u662f\u8bfb\u5916\u8bbe\u64cd\u4f5c\uff0c\u6216\u8005\u5c31\u662f\u5199\u64cd\u4f5c\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'01 #include <stdio.h>\n02 #include <sys/ioctl.h>\n03 #include <unistd.h>\n04 #include <fcntl.h>\n05 #include <linux/i2c-dev.h>\n06 #include <linux/i2c.h>\n07  \n08 /* eeprom\u6240\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u7684\u8bbe\u5907\u8282\u70b9 */ \n09 #define EEPROM_DEVICE    \t"/dev/i2c-0"\t\n10 \n11 /* eeprom\u7684I2C\u8bbe\u5907\u5730\u5740 */\n12 #define EEPROM_ADDR    0x50\n13 \n14 \n15 int main()\n16 {\n17 \tint fd,i,ret=0;\n18 \tunsigned char w_add=0x10;\n19 \t\n20 \t/* \u5c06\u8981\u8bfb\u53d6\u7684\u6570\u636ebuf*/\n21 \tunsigned char rd_buf[13] = {0x10};  \n22 \t\n23 \t/* \u8981\u5199\u7684\u6570\u636ebuf\uff0c\u7b2c0\u4e2a\u5143\u7d20\u662f\u8981\u64cd\u4f5ceeprom\u7684\u5bc4\u5b58\u5668\u5730\u5740*/\n24 \tunsigned char wr_buf[13] = {0};     \n25 \n26 \tprintf("hello,this is read_write i2c test \\n");\n27 \t\n28 \t/* \u6253\u5f00eeprom\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u6587\u4ef6 */\n29 \tfd =open(EEPROM_DEVICE, O_RDWR);\n30 \tif (fd< 0) \n31 \t{\n32 \t\tprintf("open"EEPROM_DEVICE"failed \\n");\n33 \t}\n34 \n35 \t/*\u8bbe\u7f6eeeprom\u7684I2C\u8bbe\u5907\u5730\u5740*/\n36 \tif (ioctl(fd,I2C_SLAVE_FORCE, EEPROM_ADDR) < 0) \n37 \t{            \n38 \t\tprintf("set slave address failed \\n");\n39 \t}\n40 \t\n41 \t/* \u5c06\u8981\u64cd\u4f5c\u7684\u5bc4\u5b58\u5668\u9996\u5730\u5740\u8d4b\u7ed9wr_buf[0] */\n42 \twr_buf[0] = w_add;\t\t\n43 \n44 \t/* \u628a\u8981\u5199\u5165\u7684\u6570\u636e\u5199\u5165\u5230\u540e\u9762\u7684buf\u4e2d */\n45 \tfor(i=1;i<13;i++)\n46 \t\twr_buf[i]=i;\n47 \n48 \t/* \u901a\u8fc7write\u51fd\u6570\u5b8c\u6210\u5411eeprom\u5199\u6570\u636e\u7684\u529f\u80fd */\n49 \twrite(fd, wr_buf, 13);\n50 \n51 \t/* \u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4 */\n52 \tsleep(1);\n53 \t\n54 \t/*\u91cd\u65b0\u5f00\u59cb\u4e0b\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5148\u5199\u5bc4\u5b58\u5668\u7684\u9996\u5730\u5740*/\n55 \twrite(fd, wr_buf, 1);\n56 \n57 \t/* \u4ecewr_buf[0] = w_add\u7684\u5bc4\u5b58\u5668\u5730\u5740\u5f00\u59cb\u8bfb\u53d612\u4e2a\u5b57\u8282\u7684\u6570\u636e */\n58 \tret=read(fd, rd_buf, 12);\n59 \tprintf("ret is %d \\r\\n",ret);\n60 \n61 \tfor(i=0;i<12;i++)\n62 \t{\n63 \t\tprintf("rd_buf is :%d\\n",rd_buf[i]);\n64 \t}\n65 \t\n66 \t/* \u5b8c\u6210\u64cd\u4f5c\u540e\uff0c\u5173\u95edeeprom\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u7684\u8bbe\u5907\u6587\u4ef6 */\n67 \tclose(fd);\n68 \n69 \treturn 0;\n70 }\n'})}),"\n",(0,s.jsx)(n.h4,{id:"6--\u7528\u6570\u636e\u5305\u7684\u65b9\u5f0f\u64cd\u4f5ci2c\u8bbe\u5907",children:"6)  \u7528\u6570\u636e\u5305\u7684\u65b9\u5f0f\u64cd\u4f5cI2C\u8bbe\u5907"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u6784\u5efa\u6570\u636e\u5305\u7ed3\u6784\u4f53\uff1a\n\u200b\t\t\u9996\u5148\u662fstruct i2c_rdwr_ioctl_data data; \u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u8be5\u7ed3\u6784\u4f53\u6765\u7ed9\u5185\u6838\u4f20\u9012\u6d88\u606f\u3002\u8be5\u7ed3\u6784\u4f53\u5305\u542b\u4e24\u4e2a\u6210\u5458struct i2c_msg __ user * msgs;\u548c __ u32 nmsgs;\u5176\u4e2d*msgs\u6307\u5411\u8868\u793a\u901a\u4fe1\u65b9\u6cd5\u4f20\u8f93\u4e3a\u6d88\u606f\u7684\u7ed3\u6784\u4f53\u3002\u800cnmsgs\u5219\u51b3\u5b9a\u4e86\u8be5\u6570\u636e\u5305\u6709\u591a\u5c11\u4e2a\u8fd9\u6837\u7684\u901a\u4fe1\u6d88\u606f\uff0c\u5728I2C\u901a\u4fe1\u534f\u8bae\u4e0a\u6765\u770b\u5c31\u4ee3\u8868\u4e86\u6709\u591a\u5c11\u4e2a\u5f00\u59cb\u4fe1\u53f7\u3002\n\u200b\t\t\u63a5\u7740\u5c31\u662fstruct i2c_msg; \u5b83\u53ef\u4ee5\u5305\u542b\u591a\u6761\u6d88\u606f\uff0c\u800c\u4e00\u6761\u6d88\u606f\u6709\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u6570\u636e\u3002\u5176\u6210\u5458\u5305\u62ec\uff1a\u201c\u4ee3\u8868I2C\u8bbe\u5907\u4ece\u5730\u5740\u7684 __ u16  addr; \u8868\u793a\u672c\u6b21\u6d88\u606f\u7684\u6807\u5fd7\u4f4d\u7684 __ u16  flags; \u8868\u793a\u6570\u636e\u957f\u5ea6\u7684 __ u16  len; \u8868\u793a\u6570\u636e\u7f13\u51b2\u533a\u7684\u6307\u9488 __u8  *buf\u201d\n\u200b\t\t\u7136\u540e\u628a\u8981\u548cI2C\u4ece\u8bbe\u5907\u901a\u4fe1\u7684\u6570\u636e\u4e0e\u4e0a\u9762\u4e24\u4e2a\u7ed3\u6784\u4f53\u5efa\u7acb\u8d77\u76f8\u5e94\u7684\u8054\u7cfb\u3002\n\u200b\t\t\u6700\u540e\u8c03\u7528I2C_RDWR\u8fdb\u5165\u9a71\u52a8\u7a0b\u5e8f\u6267\u884c\u8bfb\u5199\u7ec4\u5408\u7684I2C\u6570\u636e\u4f20\u8f93\u3002\n\u200b\t\t\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'01 #include <stdio.h>\n02 #include <string.h>\n03 #include <sys/ioctl.h>\n04 #include <unistd.h>\n05 #include <fcntl.h>\n06 #include <linux/i2c-dev.h>\n07 #include <linux/i2c.h>\n08 \n09 /* eeprom\u6240\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u7684\u8bbe\u5907\u8282\u70b9 */ \n10 #define EEPROM_DEVICE    \t"/dev/i2c-0"\t\n11 \n12 /* eeprom\u7684I2C\u8bbe\u5907\u5730\u5740 */\n13 #define EEPROM_ADDR    0x50\t\t\t\t\n14 \n15 /*\u51fd\u6570\u540d\uff1aeeprom_write\n16 **\u529f\u80fd\uff1a\u5411eeprom\u5199\u6570\u636e\n17 **\u53c2\u6570\uff1afd\uff1aeeprom\u5bf9\u5e94I2C\u63a7\u5236\u5668\u8bbe\u5907\u8282\u70b9\u7684\u6587\u4ef6\u540d\n18 **\t\tdev_addr\uff1aeeprom\u7684I2C\u4ece\u8bbe\u5907\u5730\u5740\n19 **\t\treg_addr\uff1aeeprom\u7684\u5bc4\u5b58\u5668\u5730\u5740\n20 **\t\tdata_buf\uff1a\u8981\u5411eeprom\u5199\u6570\u636e\u7684\u6570\u636ebuf\n21 **\t\tlen\uff1a\u8981\u5199\u591a\u5c11\u4e2a\u5b57\u8282\u3002\u672c\u4f8b\u4e2d\u5f53\u524d\u6700\u5927\u652f\u6301\u4e3a8\u4e2a\u5b57\u8282\n22 **\u8fd4\u56de\u503c\uff1a\u8d1f\u6570\u8868\u793a\u64cd\u4f5c\u5931\u8d25\uff0c\u5176\u4ed6\u4e3a\u6210\u529f\n23 */\n24 int eeprom_write(int fd, unsigned char dev_addr, unsigned char reg_addr, unsigned char * data_buf,int len)\n25 {\n26 \tint ret;\n27 \n28 \tunsigned char msg_buf[9];\n29 \tstruct i2c_rdwr_ioctl_data data;\n30 \n31 \tstruct i2c_msg messages;\n32 \n33 \n34 \t/* 1. \u6784\u5efamsg_buf*/\n35 \t/* 1.1. \u5c06\u8981\u64cd\u4f5c\u7684\u5bc4\u5b58\u5668\u9996\u5730\u5740\u8d4b\u7ed9\u8981\u8fdb\u884cI2C\u6570\u636e\u901a\u4fe1\u7684\u9996\u5b57\u8282\u6570\u636e */\n36 \tmsg_buf[0] = reg_addr;\n37 \t\n38 \t/* 1.2. \u5c06\u8981\u5411eeprom\u5199\u6570\u636e\u7684\u6570\u636ebuf\u8d4b\u5728I2C\u6570\u636e\u901a\u4fe1\u4e2deeprom\u5bc4\u5b58\u5668\u7684\u540e\u9762 */\n39 \tif (len < 9) {\t\t\t/* \u672cdemo\u6700\u5927\u652f\u6301\u4e00\u6b21\u5411eeprom\u5199\u4e00\u9875\u5927\u5c0f\u76848\u4e2a\u5b57\u8282\u6570\u636e */\n40         memcpy((void *) &msg_buf[1], data_buf, len);  //\u7b2c1\u4f4d\u4e4b\u540e\u662f\u6570\u636e\n41     } else {\n42         printf("This function supports up to 8 bytes at a time !!!\\n");\n43         return -1;\n44     }\n45 \n46 \t/* 2. \u6784\u5efa struct i2c_msg messages */\n47 \t/* 2.1. \u8d4b\u503ceeprom\u7684I2C\u4ece\u8bbe\u5907\u5730\u5740 */\n48 \tmessages.addr = dev_addr;  \n49 \n50 \t/* 2.2. \u8d4b\u503cflags\u4e3a\u672c\u6b21I2C\u901a\u4fe1\u5b8c\u6210\u5199\u529f\u80fd */\n51 \tmessages.flags = 0;    \n52 \n53 \t/* 2.3. \u8d4b\u503clen\u4e3a\u6570\u636ebuf\u7684\u957f\u5ea6 + eeprom\u5bc4\u5b58\u5668\u5730\u5740\u7684\u6570\u636e\u957f\u5ea6 */\n54 \tmessages.len = len+1;\n55 \n56 \t/* 2.4. \u6784\u5efa\u6d88\u606f\u5305\u7684\u6570\u636ebuf*/\n57 \tmessages.buf = msg_buf;  \n58 \n59 \t/* 3. \u6784\u5efastruct i2c_rdwr_ioctl_data data */\n60 \t/* 3.1. \u5c06\u51c6\u5907\u597d\u7684\u6d88\u606f\u5305\u8d4b\u503c\u7ed9i2c_rdwr_ioctl_data\u4e2d\u7684msgs\u6d88\u606f*/\n61 \tdata.msgs = &messages;\n62 \n63 \t/* 3.2. \u7531\u4e8e\u672c\u6b21I2C\u901a\u4fe1\u53ea\u6709\u5199\u52a8\u4f5c\uff0c\u6240\u4ee5\u6d88\u606f\u6570\u4e3a1\u6b21 */\n64 \tdata.nmsgs = 1;\n65 \n66 \t/* 4. \u8c03\u7528\u9a71\u52a8\u5c42\u7684\u8bfb\u5199\u7ec4\u5408\u7684I2C\u6570\u636e\u4f20\u8f93 */\n67 \tif(ioctl(fd, I2C_RDWR, &data) < 0)\n68 \t{\n69 \t\tprintf("I2C_RDWR err \\n");\n70 \t\treturn -1;\n71 \t}\n72 \n73 \t/* 5. \u7b49\u5f85I2C\u603b\u7ebf\u5199\u5165\u5b8c\u6210 */\n74 \tsleep(1);\n75 \n76 \treturn 0;\n77 }\n78 \n79 /*\u51fd\u6570\u540d\uff1aeeprom_read\n80 **\u529f\u80fd\uff1a\u4eceeeprom\u8bfb\u6570\u636e\n81 **\u53c2\u6570\uff1afd\uff1aeeprom\u5bf9\u5e94I2C\u63a7\u5236\u5668\u8bbe\u5907\u8282\u70b9\u7684\u6587\u4ef6\u540d\n82 **\t\tdev_addr\uff1aeeprom\u7684I2C\u4ece\u8bbe\u5907\u5730\u5740\n83 **\t\treg_addr\uff1aeeprom\u7684\u5bc4\u5b58\u5668\u5730\u5740\n84 **\t\tdata_buf\uff1a\u5b58\u653e\u4eceeeprom\u8bfb\u6570\u636e\u7684buf\n85 **\t\tlen\uff1a\u8981\u8bfb\u591a\u5c11\u4e2a\u5b57\u8282\u3002\n86 **\u8fd4\u56de\u503c\uff1a\u8d1f\u6570\u8868\u793a\u64cd\u4f5c\u5931\u8d25\uff0c\u5176\u4ed6\u4e3a\u6210\u529f\n87 */\n88 int eeprom_read(int fd, unsigned char dev_addr, unsigned char reg_addr, unsigned char * data_buf,int len)\n89 {\n90 \tint ret;\n91 \n92 \tunsigned char msg_buf[9];\n93 \tstruct i2c_rdwr_ioctl_data data;\n94 \n95 \tstruct i2c_msg messages[2];\n96 \n97 \t/* 1. \u6784\u5efa struct i2c_msg messages */\n98 \t/* 1.1. \u6784\u5efa\u7b2c\u4e00\u6761\u6d88\u606f messages[0] */\n99 \t/* 1.1.1. \u8d4b\u503ceeprom\u7684I2C\u4ece\u8bbe\u5907\u5730\u5740 */\n100 \tmessages[0].addr = dev_addr;  \n101 \n102 \t/* 1.1.2. \u8d4b\u503cflags\u4e3a\u672c\u6b21I2C\u901a\u4fe1\u5b8c\u6210\u5199\u52a8\u4f5c */\n103 \tmessages[0].flags = 0;    \n104 \n105 \t/* 1.1.3. \u8d4b\u503clen\u4e3aeeprom\u5bc4\u5b58\u5668\u5730\u5740\u7684\u6570\u636e\u957f\u5ea6\u662f1 */\n106 \tmessages[0].len = 1;\n107 \n108 \t/* 1.1.4. \u672c\u6b21\u5199\u52a8\u4f5c\u7684\u6570\u636e\u662f\u8981\u8bfb\u53d6eeprom\u7684\u5bc4\u5b58\u5668\u9996\u5730\u5740*/\n109 \tmessages[0].buf = &reg_addr;  \n110 \t\n111 \t/* 1.2. \u6784\u5efa\u7b2c\u4e8c\u6761\u6d88\u606f messages[1] */\n112 \t/* 1.2.1. \u8d4b\u503ceeprom\u7684I2C\u4ece\u8bbe\u5907\u5730\u5740 */\n113 \tmessages[1].addr = dev_addr;  \n114 \n115 \t/* 1.1.2. \u8d4b\u503cflags\u4e3a\u672c\u6b21I2C\u901a\u4fe1\u5b8c\u6210\u8bfb\u52a8\u4f5c */\n116 \tmessages[1].flags = I2C_M_RD;    \n117 \n118 \t/* 1.1.3. \u8d4b\u503clen\u4e3a\u8981\u8bfb\u53d6eeprom\u5bc4\u5b58\u5668\u6570\u636e\u957f\u5ea6len */\n119 \tmessages[1].len = len;\n120 \n121 \t/* 1.1.4. \u672c\u6b21\u8bfb\u52a8\u4f5c\u7684\u6570\u636e\u8981\u5b58\u653e\u7684buf\u4f4d\u7f6e*/\n122 \tmessages[1].buf = data_buf; \n123 \n124 \t/* 2. \u6784\u5efastruct i2c_rdwr_ioctl_data data */\n125 \t/* 2.1. \u5c06\u51c6\u5907\u597d\u7684\u6d88\u606f\u5305\u8d4b\u503c\u7ed9i2c_rdwr_ioctl_data\u4e2d\u7684msgs\u6d88\u606f*/\n126 \tdata.msgs = messages;\n127 \n128 \t/* 2.2. \u7531\u4e8e\u672c\u6b21I2C\u901a\u4fe1\u65e2\u6709\u5199\u52a8\u4f5c\u4e5f\u6709\u8bfb\u52a8\u4f5c\uff0c\u6240\u4ee5\u6d88\u606f\u6570\u4e3a2\u6b21 */\n129 \tdata.nmsgs = 2;\n130 \n131 \t/* 3. \u8c03\u7528\u9a71\u52a8\u5c42\u7684\u8bfb\u5199\u7ec4\u5408\u7684I2C\u6570\u636e\u4f20\u8f93 */\n132 \tif(ioctl(fd, I2C_RDWR, &data) < 0)\n133 \t{\n134 \t\tprintf("I2C_RDWR err \\n");\n135 \t\treturn -1;\n136 \t}\n137 \n138 \t/* 4. \u7b49\u5f85I2C\u603b\u7ebf\u8bfb\u53d6\u5b8c\u6210 */\n139 \tsleep(1);\n140 \n141 \treturn 0;\n142 }\n143  \n144 int main()\n145 {\n146 \tint fd,i,ret=0;\n147 \tunsigned char w_add=0x10;\n148 \t\n149 \t/* \u5c06\u8981\u8bfb\u53d6\u7684\u6570\u636ebuf*/\n150 \tunsigned char rd_buf[8] = {0};  \n151 \t\n152 \t/* \u8981\u5199\u7684\u6570\u636ebuf*/\n153 \tunsigned char wr_buf[8] = {0};  \n154 \n155 \tprintf("hello,this is I2C_RDWR i2c test \\n");\n156 \t\n157 \t/* \u6253\u5f00eeprom\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u6587\u4ef6 */\n158 \tfd =open(EEPROM_DEVICE, O_RDWR);\n159 \tif (fd< 0) \n160 \t{\n161 \t\tprintf("open"EEPROM_DEVICE"failed \\n");\n162 \t}\t\n163 \n164 \t/* \u628a\u8981\u5199\u5165\u7684\u6570\u636e\u5199\u5165\u5230\u540e\u9762\u7684buf\u4e2d */\n165 \tfor(i=0;i<8;i++)\n166 \t\twr_buf[i]=i;\n167 \n168 \t/* \u901a\u8fc7I2C_RDWR\u5b8c\u6210\u5411eeprom\u8bfb\u6570\u636e\u7684\u529f\u80fd */\n169 \teeprom_write(fd,EEPROM_ADDR,w_add,wr_buf,8);\n170 \n171 \t\n172 \t/* \u901a\u8fc7I2C_RDWR\u5b8c\u6210\u5411eeprom\u5199\u6570\u636e\u7684\u529f\u80fd */\n173 \teeprom_read(fd,EEPROM_ADDR,w_add,rd_buf,8);\n174 \n175 \tfor(i=0;i<8;i++)\n176 \t{\n177 \t\tprintf("rd_buf is :%d\\n",rd_buf[i]);\n178 \t}\n179 \t\n180 \t/* \u5b8c\u6210\u64cd\u4f5c\u540e\uff0c\u5173\u95edeeprom\u5bf9\u5e94\u7684I2C\u63a7\u5236\u5668\u7684\u8bbe\u5907\u6587\u4ef6 */\n181 \tclose(fd);\n182 \n183 \treturn 0;\n184 }\n185 \n186  \n'})}),"\n",(0,s.jsx)(n.h3,{id:"1233-\u7b80\u4ecbi2c\u7684\u8c03\u8bd5\u65b9\u5f0f",children:"12.3.3 \u7b80\u4ecbI2C\u7684\u8c03\u8bd5\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.h4,{id:"1-\u6982\u8ff0i2c\u901a\u4fe1\u4e2d\u5b8c\u6210\u6b63\u5e38\u901a\u4fe1\u7684\u5e38\u89c1\u5143\u7d20",children:"1) \u6982\u8ff0I2C\u901a\u4fe1\u4e2d\u5b8c\u6210\u6b63\u5e38\u901a\u4fe1\u7684\u5e38\u89c1\u5143\u7d20\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e00\uff0c\u5148\u68c0\u67e5I2C\u603b\u7ebf\u4e0a\u7684\u6240\u6709\u8bbe\u5907\u662f\u5426\u90fd\u7ecf\u4e0a\u62c9\u7535\u963b\u5230\u7535\u6e90\uff0c\u5e76\u68c0\u67e5\u4f9b\u7535\u662f\u5426\u7a33\u5b9a\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e8c\uff0c\u6570\u636e\u7ebf\u548c\u65f6\u949f\u4fe1\u53f7\u7ebf\u662f\u5426\u6709\u63a5\u53cd\u7684\u60c5\u51b5\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e09\uff0cI2C\u7684\u901a\u4fe1\u901f\u7387\u662f\u5426\u8d85\u8fc7\u4e86\u8bbe\u5907\u6240\u652f\u6301\u7684\u6700\u9ad8\u901f\u5ea6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u56db\uff0c\u68c0\u67e5\u5916\u90e8I2C\u8bbe\u5907\u4e0e\u64cd\u4f5c\u7684I2C\u63a7\u5236\u5668\u662f\u5426\u6302\u5728\u4e86\u540c\u4e00\u6761I2C\u603b\u7ebf\u4e0a\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e94\uff0c\u68c0\u67e5\u64cd\u4f5c\u7684I2C\u5916\u8bbe\u5730\u5740\u662f\u5426\u6b63\u786e\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u516d\uff0c\u68c0\u67e5I2C\u603b\u7ebf\u4e0a\u662f\u5426\u6709\u591a\u4e2a\u76f8\u540c\u8bbe\u5907\u5730\u5740\u7684\u4ece\u673a\u8bbe\u5907\uff0c\u5bfc\u81f4\u901a\u4fe1\u51b2\u7a81\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e03\uff0c\u64cd\u4f5c\u7684I2C\u5916\u8bbe\u662f\u5426\u5904\u4e8e\u5199\u4fdd\u62a4\u72b6\u6001\uff0c\u5199\u4fdd\u62a4\u72b6\u6001\u662f\u65e0\u6cd5\u5199\u5165\u6570\u636e\u7684\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u516b\uff0c\u68c0\u67e5I2C\u901a\u4fe1\u65f6\u5e8f\u662f\u5426\u6ee1\u8db3I2C\u901a\u4fe1\u534f\u8bae\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u4e5d\uff0c\u68c0\u67e5\u5728\u6ca1\u6709\u5f00\u59cb\u8fd0\u884cI2C\u901a\u4fe1\u7a0b\u5e8f\u7684\u65f6\u5019\uff0cI2C\u603b\u7ebf\u4e0a\u7684\u7535\u5e73\u4fe1\u53f7\u662f\u5426\u5e72\u51c0\u7a33\u5b9a\u7684\u4fdd\u6301\u9ad8\u7535\u5e73\uff0c\u662f\u5426\u51fa\u73b0\u8fc7\u4e3b\u673a\u8bef\u628aSDA\u62c9\u4f4e\u7684\u60c5\u51b5\uff0c\u5bfc\u81f4I2C\u603b\u7ebf\u51fa\u73b0\u201c\u5fd9\u788c\u201d\u72b6\u6001\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7b2c\u5341\uff0c\u68c0\u67e5I2C\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u662f\u5426\u51fa\u73b0SDA\u6216\u8005SCL\u88ab\u957f\u65f6\u95f4\u4e00\u76f4\u62c9\u4f4e\u7684\u72b6\u6001\u3002\u6bd4\u5982I2C\u5916\u8bbe\u4ece\u673a\u7531\u4e8e\u5f02\u5e38\u5728\u53d1\u9001\u5b8cACK\u4fe1\u53f7\u540e\u6ca1\u6709\u91ca\u653eSDA\u3002\u53e6\u4e00\u79cd\u60c5\u51b5\u662fcpu\u5728\u505a\u4ece\u673a\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u53ca\u65f6\u5b8c\u6210\u5c06\u8bfb\u53d6\u7684\u4e3b\u673a\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u5bfc\u81f4\u957f\u65f6\u95f4\u5c06SCL\u62c9\u4f4e\uff0c\u7834\u574f\u4e86I2C\u901a\u4fe1\u6d41\u7a0b\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u5199I2C\u901a\u4fe1\u7684\u65f6\u5019\u6700\u597d\u5c3d\u5feb\u5728I2C\u63a5\u6536\u6570\u636e\u4e2d\u65ad\u670d\u52a1\u51fd\u6570\u4e2d\u5b8c\u6210\u6570\u636e\u5904\u7406\u5de5\u4f5c\u5e76\u6388\u6743I2C\u63a7\u5236\u5668\u8ba9\u5176\u6b63\u5e38\u5de5\u4f5c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7531\u4e8eI2C\u603b\u7ebf\u7684\u534f\u8bae\u7279\u6027\uff0c\u5982\u679c\u603b\u7ebf\u4e0a\u6709\u4efb\u4f55\u4e00\u4e2aI2C\u8bbe\u5907\u5c06SCL\u6216\u8005SDA\u7684\u4fe1\u53f7\u62c9\u4f4e\uff0c\u5176\u4ed6\u7684I2C\u8bbe\u5907\u90fd\u5c06\u770b\u5230\u8fd9\u4e2a\u4f4e\u7535\u5e73\uff0c\u5e76\u4e14\u90fd\u65e0\u6cd5\u62c9\u9ad8\u4ed6\u4eec\u3002\u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6709\u8bbe\u5907\u4e0d\u91ca\u653e\u603b\u7ebf\uff0c\u4e00\u76f4\u628a\u603b\u7ebf\u7684\u7535\u5e73\u62c9\u4f4e\uff0c\u90a3\u4e48\u6574\u4e2aI2C\u603b\u7ebf\u5c06\u4f1a\u51fa\u73b0\u6682\u505c\u6302\u6b7b\u7684\u72b6\u6001\uff0c\u5c06\u65e0\u6cd5\u6309\u7167I2C\u534f\u8bae\u8fdb\u884c\u6b63\u5e38\u901a\u4fe1\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5982\u679c\u8d1f\u8d23I2C\u603b\u7ebf\u4e3b\u673acpu\u7684I2C\u63a7\u5236\u5668\u51fa\u73b0\u4e0a\u8ff0\u957f\u65f6\u95f4\u62c9\u4f4eI2C\u603b\u7ebf\u7684\u7535\u5e73\uff0c\u7406\u8bba\u4e0a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u8bd5\u4ee3\u7801\u627e\u51faI2C\u603b\u7ebf\u6b7b\u673a\u7684\u539f\u56e0\uff0c\u5e76\u4fee\u6539\u4ee3\u7801\u91cd\u65b0\u521d\u59cb\u5316\u8be5I2C\u63a7\u5236\u5668\u6765\u590d\u4f4d\u5b83\uff0c\u8ba9\u5176\u91cd\u65b0\u8fdb\u884cI2C\u901a\u4fe1\u3002\u5982\u679c\u901a\u8fc7\u8c03\u8bd5\u53d1\u73b0\u5bfc\u81f4I2C\u603b\u7ebf\u6b7b\u673a\u7684\u539f\u56e0\u662f\u7531I2C\u5916\u8bbe\u5bfc\u81f4\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u590d\u4f4d\u8be5\u5916\u8bbe\u82af\u7247\u3002\u4f46\u662f\u5728\u5b9e\u9645\u7684\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u53ef\u80fd\u590d\u4f4dI2C\u603b\u7ebf\u4e0a\u7684\u5143\u4ef6\u4e5f\u65e0\u6cd5\u6062\u590d\u6b63\u5e38\u7684I2C\u901a\u4fe1\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u8981\u8bbe\u8ba1I2C\u603b\u7ebf\u7684\u4e3b\u673a\u7a0b\u5e8f\u5c06I2C\u63a7\u5236\u5668\u5f15\u811a\u8bbe\u7f6e\u4e3aGPIO\u529f\u80fd\u5e76\u6a21\u62dfI2C\u534f\u8bae\u5b8c\u6210\u4e00\u6b21\u5b8c\u6574\u7684I2C\u901a\u4fe1\uff0c\u518d\u5c06I2C\u63a7\u5236\u5668\u8bbe\u7f6e\u8bbe\u7f6e\u4e3aI2C\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"124-\u603b\u7ed3i2c\u5728\u5d4c\u5165\u5f0f\u9879\u76ee\u5f00\u53d1\u7684\u5e94\u7528\u4f18\u7f3a\u70b9",children:"12.4 \u603b\u7ed3I2C\u5728\u5d4c\u5165\u5f0f\u9879\u76ee\u5f00\u53d1\u7684\u5e94\u7528\u4f18\u7f3a\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4f18\u70b9\uff1a\u53ea\u4f7f\u7528\u4e24\u6839\u7ebf\uff0c\u652f\u6301\u591a\u4e2a\u4e3b\u63a7\u5236\u5668\u548c\u591a\u4e2a\u4ece\u8bbe\u5907\uff0cI2C\u5177\u6709\u975e\u5e38\u5e7f\u6cdb\u4f7f\u7528\u7684\u534f\u8bae\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u7f3a\u70b9\uff1a\u6570\u636e\u4f20\u8f93\u901f\u7387\u6bd4SPI\u6162\uff0c\u6570\u636e\u5e27\u7684\u5927\u5c0f\u9650\u5236\u4e3a8\u4f4d\uff0c\u5b9e\u73b0\u6bd4SPI\u66f4\u590d\u6742\u7684\u786c\u4ef6\u3002\u800c\u4e14I2C\u901a\u4fe1\u9700\u8981\u6ce8\u610f\u4e0b\u9762\u7684\u4f7f\u7528\u95ee\u9898\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"1-i2c\u65f6\u949f\u4fe1\u53f7scl\u7684\u540c\u6b65\u95ee\u9898",children:"1) I2C\u65f6\u949f\u4fe1\u53f7\uff08SCL\uff09\u7684\u540c\u6b65\u95ee\u9898"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u5728I2C\u603b\u7ebf\u4e0a\u4f20\u9001\u4fe1\u606f\u65f6\u7684\u65f6\u949f\u540c\u6b65\u4fe1\u53f7\u662f\u7531\u6302\u63a5\u5728SCL\u7ebf\u4e0a\u7684\u6240\u6709\u5668\u4ef6\u7684\u903b\u8f91\u201c\u4e0e\u201d\u5b8c\u6210\u7684\u3002SCL\u7ebf\u4e0a\u7531\u9ad8\u7535\u5e73\u5230\u4f4e\u7535\u5e73\u7684\u8df3\u53d8\u5c06\u5f71\u54cd\u5230\u8fd9\u4e9b\u5668\u4ef6\uff0c\u4e00\u65e6\u67d0\u4e2a\u5668\u4ef6\u7684\u65f6\u949f\u4fe1\u53f7\u4e0b\u8df3\u4e3a\u4f4e\u7535\u5e73\uff0c\u5c06\u4f7fSCL\u7ebf\u4e00\u76f4\u4fdd\u6301\u4f4e\u7535\u5e73\uff0c\u4f7fSCL\u7ebf\u4e0a\u7684\u6240\u6709\u5668\u4ef6\u5f00\u59cb\u4f4e\u7535\u5e73\u671f\u3002\u6b64\u65f6\uff0c\u4f4e\u7535\u5e73\u5468\u671f\u77ed\u7684\u5668\u4ef6\u7684\u65f6\u949f\u7531\u4f4e\u81f3\u9ad8\u7684\u8df3\u53d8\u5e76\u4e0d\u80fd\u5f71\u54cdSCL\u7ebf\u7684\u72b6\u6001\uff0c\u4e8e\u662f\u8fd9\u4e9b\u5668\u4ef6\u5c06\u8fdb\u5165\u9ad8\u7535\u5e73\u7b49\u5f85\u7684\u72b6\u6001\u3002\u5f53\u6240\u6709\u5668\u4ef6\u7684\u65f6\u949f\u4fe1\u53f7\u90fd\u4e0a\u8df3\u4e3a\u9ad8\u7535\u5e73\u65f6\uff0c\u4f4e\u7535\u5e73\u671f\u7ed3\u675f\uff0cSCL\u7ebf\u88ab\u91ca\u653e\u8fd4\u56de\u9ad8\u7535\u5e73\uff0c\u5373\u6240\u6709\u7684\u5668\u4ef6\u90fd\u540c\u65f6\u5f00\u59cb\u5b83\u4eec\u7684\u9ad8\u7535\u5e73\u671f\u3002\u5176\u540e\uff0c\u7b2c\u4e00\u4e2a\u7ed3\u675f\u9ad8\u7535\u5e73\u671f\u7684\u5668\u4ef6\u53c8\u5c06SCL\u7ebf\u62c9\u6210\u4f4e\u7535\u5e73\u3002\u8fd9\u6837\u5c31\u5728SCL\u7ebf\u4e0a\u4ea7\u751f\u4e00\u4e2a\u540c\u6b65\u65f6\u949f\u3002\u53ef\u89c1\uff0c\u65f6\u949f\u4f4e\u7535\u5e73\u65f6\u95f4\u7531\u65f6\u949f\u4f4e\u7535\u5e73\u671f\u6700\u957f\u7684\u5668\u4ef6\u786e\u5b9a\uff0c\u800c\u65f6\u949f\u9ad8\u7535\u5e73\u65f6\u95f4\u7531\u65f6\u949f\u9ad8\u7535\u5e73\u671f\u6700\u77ed\u7684\u5668\u4ef6\u786e\u5b9a\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"2-\u603b\u7ebf\u9a71\u52a8\u80fd\u529b",children:"2) \u603b\u7ebf\u9a71\u52a8\u80fd\u529b"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u4e0a\u62c9\u7535\u963b\u548c\u8d1f\u8f7d\u7535\u5bb9\u51b3\u5b9a\u4e86\u603b\u7ebf\u5728\u67d0\u4e00\u901f\u7387\u4e0b\u7684\u7a33\u5b9a\u6027\u3002\u5f53\u8f93\u51fa\u4e3a\u9ad8\u65f6\uff0c\u7535\u6d41\u901a\u8fc7\u4e0a\u62c9\u7535\u963b\u5bf9\u8d1f\u8f7d\u7535\u5bb9\u5145\u7535\u3002\u4e0a\u62c9\u8d8a\u5927\uff0c\u7535\u5bb9\u8d8a\u5927\uff0c\u6240\u9700\u8981\u7684\u65f6\u95f4\u5c31\u8d8a\u957f\uff0c\u5982\u679c\u8d85\u8fc7\u4e86\u901a\u4fe1\u5468\u671f\u768410%\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e0a\u5347\u6cbf\u5c31\u592a\u7f13\u4e86\uff0c\u76f8\u5e94\u7684\u5efa\u7acb\u65f6\u95f4\u4f1a\u53d7\u5230\u5f71\u54cd\uff0cI2C\u89c4\u8303\u7684\u6700\u5927\u8d1f\u8f7d\u7535\u5bb9\u662f400pF\uff0c\u5feb\u901f\u6a21\u5f0f\u4e0b\u662f100pF\u3002\u5982\u679c\u8f93\u51fa\u4e3a\u4f4e\uff0c\u7535\u6d41\u901a\u8fc7\u4e0a\u62c9\u7535\u963b\u88abI2C master\u5668\u4ef6\u5438\u53d6\uff0c\uff08\u6ce8\u610f\u6839\u636eI2C\u89c4\u8303\uff0c\u6700\u5c0f\u53ea\u67093\u6beb\u5b89\u7684\u5438\u53d6\u7535\u6d41\uff09\u90a3\u4e48\u8fd9\u4e2a\u5438\u53d6\u7535\u6d41\u5728\u4e0a\u62c9\u7535\u963b\u4e0a\u7684\u538b\u964d\u5c31\u51b3\u5b9a\u4e86\u8f93\u51fa\u4f4e\u7535\u5e73\u80fd\u8fbe\u5230\u7684\u8303\u56f4\uff0c\u5982\u679c\u4e0d\u80fd\u8fbe\u52300.3VDD\u4ee5\u4e0b\uff0c\u5c31\u4f1a\u6709\u8bef\u91c7\u6837\u3002\u6709\u4eba\u8bf4\u52a0\u5927\u4e0a\u62c9\u7535\u963b\u662f\u4e0d\u59a5\u5f53\u7684\uff0c\u8981\u5177\u4f53\u5206\u6790\u5438\u53d6\u7535\u6d41\u3001\u8d1f\u8f7d\u7535\u5bb9\u3001\u4e0a\u62c9\u7535\u5e73\u548c\u901a\u4fe1\u901f\u7387\u624d\u80fd\u51b3\u5b9a\uff08\u666e\u901a\u6a21\u5f0f\u548c\u5feb\u901f\u6a21\u5f0f\u662f\u4e0d\u4e00\u6837\u7684\uff09\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u200b\t\t\u867d\u7136\u901f\u5ea6\u4e0d\u662f\u7279\u522b\u5feb\uff0c\u4f46\u662f\u4fe1\u53f7\u7ebf\u4e0a\u5982\u679c\u6709\u52a0\u7535\u5bb9\u7684\u8bdd\uff0c\u5207\u8bb0\u4e0d\u8981\u52a0\u5927\u7684\uff0c\u4e00\u5b9a\u8981\u5c0f\uff0c\u5426\u5219\u4fe1\u53f7\u8fd8\u6ca1\u5230\u4ece\u8bbe\u5907\u5462\uff0c\u5c31\u88ab\u7535\u5bb9\u5403\u4e86\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var s=t(6540);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);