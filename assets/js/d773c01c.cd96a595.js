"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2559],{5930:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>x,frontMatter:()=>d,metadata:()=>t,toc:()=>a});var l=s(4848),r=s(8453);const d={},i="8 ALSA",t={id:"Knowledge-Notes/AudioBoard",title:"8 ALSA",description:"8.1 \u97f3\u9891\u76f8\u5173\u6982\u5ff5",source:"@site/docs/Knowledge-Notes/08_AudioBoard.md",sourceDirName:"Knowledge-Notes",slug:"/Knowledge-Notes/AudioBoard",permalink:"/docs/Knowledge-Notes/AudioBoard",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linux-docs/tree/main/docs/Knowledge-Notes/08_AudioBoard.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{},sidebar:"KnowledgeNotes",previous:{title:"7 \u6444\u50cf\u5934V4L2\u7f16\u7a0b",permalink:"/docs/Knowledge-Notes/CameraV4L2"},next:{title:"9 GPIO\u7f16\u7a0b",permalink:"/docs/Knowledge-Notes/GPIOProgram"}},c={},a=[{value:"8.1 \u97f3\u9891\u76f8\u5173\u6982\u5ff5",id:"81-\u97f3\u9891\u76f8\u5173\u6982\u5ff5",level:2},{value:"8.1.1 \u91c7\u6837\u9891\u7387",id:"811-\u91c7\u6837\u9891\u7387",level:3},{value:"8.1.2 \u91cf\u5316\u4f4d\u6570",id:"812-\u91cf\u5316\u4f4d\u6570",level:3},{value:"8.2 ALSA\u67b6\u6784",id:"82-alsa\u67b6\u6784",level:2},{value:"8.2.1 ALSA\u67b6\u6784\u4ecb\u7ecd",id:"821-alsa\u67b6\u6784\u4ecb\u7ecd",level:3},{value:"8.3 \u79fb\u690dALSA\u5e93\u53ca\u5de5\u5177",id:"83-\u79fb\u690dalsa\u5e93\u53ca\u5de5\u5177",level:2},{value:"8.3.1 ALSA\u5e93\u4e0b\u8f7d",id:"831-alsa\u5e93\u4e0b\u8f7d",level:3},{value:"8.3.2 ALSA Lib\u7f16\u8bd1",id:"832-alsa-lib\u7f16\u8bd1",level:3},{value:"8.3.3 ALSA Util\u7f16\u8bd1",id:"833-alsa-util\u7f16\u8bd1",level:3},{value:"8.3.4 ALSA\u5e93\u548c\u5de5\u5177\u79fb\u690d\u5165\u5d4c\u5165\u5f0f\u5e73\u53f0",id:"834-alsa\u5e93\u548c\u5de5\u5177\u79fb\u690d\u5165\u5d4c\u5165\u5f0f\u5e73\u53f0",level:3},{value:"8.4 ALSA\u7684\u8c03\u8bd5",id:"84-alsa\u7684\u8c03\u8bd5",level:2},{value:"8.4.1 amixer",id:"841-amixer",level:3},{value:"8.4.2 aplay",id:"842-aplay",level:3},{value:"8.4.3 arecord",id:"843-arecord",level:3},{value:"8.5 \u5e38\u7528\u63a5\u53e3\u8bf4\u660e",id:"85-\u5e38\u7528\u63a5\u53e3\u8bf4\u660e",level:2},{value:"8.5.1 PCM\u63a5\u53e3",id:"851-pcm\u63a5\u53e3",level:3},{value:"8.6 \u57fa\u4e8eALSA\u7684\u97f3\u91cf\u63a7\u5236\u7a0b\u5e8f\u8bbe\u8ba1",id:"86-\u57fa\u4e8ealsa\u7684\u97f3\u91cf\u63a7\u5236\u7a0b\u5e8f\u8bbe\u8ba1",level:2},{value:"8.6.1 \u7a0b\u5e8f\u8bbe\u8ba1",id:"861-\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"8.6.2 AlsaVolume \u7c7b\u7684\u5b9a\u4e49",id:"862-alsavolume-\u7c7b\u7684\u5b9a\u4e49",level:3},{value:"8.6.3 AlsaVolume\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",id:"863-alsavolume\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",level:3},{value:"8.7 ALSA\u57fa\u7c7b\u7684\u8bbe\u8ba1",id:"87-alsa\u57fa\u7c7b\u7684\u8bbe\u8ba1",level:2},{value:"8.7.1 \u7a0b\u5e8f\u8bbe\u8ba1",id:"871-\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"8.7.2 AlsaBase\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",id:"872-alsabase\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",level:3},{value:"8.8 \u57fa\u4e8eALSA\u97f3\u9891\u7684\u64ad\u653e",id:"88-\u57fa\u4e8ealsa\u97f3\u9891\u7684\u64ad\u653e",level:2},{value:"8.8.1 \u7a0b\u5e8f\u8bbe\u8ba1",id:"881-\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"8.1.2 AlsaPlay\u7c7b\u7684\u5b9a\u4e49",id:"812-alsaplay\u7c7b\u7684\u5b9a\u4e49",level:3},{value:"8.1.3 AlsaPlayback\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",id:"813-alsaplayback\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",level:3},{value:"8.9 \u57fa\u4e8eALSA\u97f3\u9891\u7684\u5f55\u5236",id:"89-\u57fa\u4e8ealsa\u97f3\u9891\u7684\u5f55\u5236",level:2},{value:"8.9.1 \u7a0b\u5e8f\u8bbe\u8ba1",id:"891-\u7a0b\u5e8f\u8bbe\u8ba1",level:3},{value:"8.9.2 AlsaPlay\u7c7b\u7684\u5b9a\u4e49",id:"892-alsaplay\u7c7b\u7684\u5b9a\u4e49",level:3},{value:"8.9.3 AlsaCapture\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",id:"893-alsacapture\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"8-alsa",children:"8 ALSA"}),"\n",(0,l.jsx)(n.h2,{id:"81-\u97f3\u9891\u76f8\u5173\u6982\u5ff5",children:"8.1 \u97f3\u9891\u76f8\u5173\u6982\u5ff5"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u97f3\u9891\u4fe1\u53f7\u662f\u4e00\u79cd\u8fde\u7eed\u53d8\u5316\u7684\u6a21\u62df\u4fe1\u53f7\uff0c\u4f46\u8ba1\u7b97\u673a\u53ea\u80fd\u5904\u7406\u548c\u8bb0\u5f55\u4e8c\u8fdb\u5236\u7684\u6570\u5b57\u4fe1\u53f7\uff0c\u7531\u81ea\u7136\u97f3\u6e90\u5f97\u5230\u7684\u97f3\u9891\u4fe1\u53f7\u5fc5\u987b\u7ecf\u8fc7\u4e00\u5b9a\u7684\u53d8\u6362\uff0c\u6210\u4e3a\u6570\u5b57\u97f3\u9891\u4fe1\u53f7\u4e4b\u540e\uff0c\u624d\u80fd\u9001\u5230\u8ba1\u7b97\u673a\u4e2d\u4f5c\u8fdb\u4e00\u6b65\u7684\u5904\u7406\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u6570\u5b57\u97f3\u9891\u7cfb\u7edf\u901a\u8fc7\u5c06\u58f0\u6ce2\u7684\u6ce2\u578b\u8f6c\u6362\u6210\u4e00\u7cfb\u5217\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u6765\u5b9e\u73b0\u5bf9\u539f\u59cb\u58f0\u97f3\u7684\u91cd\u73b0\uff0c\u5b9e\u73b0\u8fd9\u4e00\u6b65\u9aa4\u7684\u8bbe\u5907\u5e38\u88ab\u79f0\u4e3a\uff08A/D\uff09\u3002A/D\u8f6c\u6362\u5668\u4ee5\u6bcf\u79d2\u949f\u4e0a\u4e07\u6b21\u7684\u901f\u7387\u5bf9\u58f0\u6ce2\u8fdb\u884c\u91c7\u6837\uff0c\u6bcf\u4e2a\u91c7\u6837\u70b9\u90fd\u8bb0\u5f55\u4e0b\u4e86\u539f\u59cb\u6a21\u62df\u58f0\u6ce2\u5728\u67d0\u4e00\u65f6\u523b\u7684\u72b6\u6001\uff0c\u901a\u5e38\u79f0\u4e4b\u4e3a\u6837\u672c\uff08sample\uff09\uff0c\u800c\u6bcf\u4e00\u79d2\u949f\u6240\u91c7\u6837\u7684\u6570\u76ee\u5219\u79f0\u4e3a\u91c7\u6837\u9891\u7387\uff0c\u901a\u8fc7\u5c06\u4e00\u4e32\u8fde\u7eed\u7684\u6837\u672c\u8fde\u63a5\u8d77\u6765\uff0c\u5c31\u53ef\u4ee5\u5728\u8ba1\u7b97\u673a\u4e2d\u63cf\u8ff0\u4e00\u6bb5\u58f0\u97f3\u4e86\u3002\u5bf9\u4e8e\u91c7\u6837\u8fc7\u7a0b\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6837\u672c\u6765\u8bf4\uff0c\u6570\u5b57\u97f3\u9891\u7cfb\u7edf\u4f1a\u5206\u914d\u4e00\u5b9a\u5b58\u50a8\u4f4d\u6765\u8bb0\u5f55\u58f0\u6ce2\u7684\u632f\u5e45\uff0c\u4e00\u822c\u79f0\u4e4b\u4e3a\u91c7\u6837\u5206\u8fa9\u7387\u6216\u8005\u91c7\u6837\u7cbe\u5ea6\uff0c\u91c7\u6837\u7cbe\u5ea6\u8d8a\u9ad8\uff0c\u58f0\u97f3\u8fd8\u539f\u65f6\u5c31\u4f1a\u8d8a\u7ec6\u817b\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image001.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u6570\u5b57\u97f3\u9891\u6d89\u53ca\u5230\u7684\u6982\u5ff5\u975e\u5e38\u591a\uff0c\u5bf9\u4e8e\u5728Linux\u4e0b\u8fdb\u884c\u97f3\u9891\u7f16\u7a0b\u7684\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u6700\u91cd\u8981\u7684\u662f7406\u89e3\u58f0\u97f3\u6570\u5b57\u5316\u7684\u4e24\u4e2a\u5173\u952e\u6b65\u9aa4\uff1a\u91c7\u6837\u548c\u91cf\u5316\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u91c7\u6837\u5c31\u662f\u6bcf\u9694\u4e00\u5b9a\u65f6\u95f4\u5c31\u8bfb\u4e00\u6b21\u58f0\u97f3\u4fe1\u53f7\u7684\u5e45\u5ea6\uff0c\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u91c7\u6837\u662f\u65f6\u95f4\u4e0a\u7684\u6570\u5b57\u5316\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u91cf\u5316\u5219\u662f\u5c06\u91c7\u6837\u5f97\u5230\u7684\u58f0\u97f3\u4fe1\u53f7\u5e45\u5ea6\u8f6c\u6362\u4e3a\u6570\u5b57\u503c\uff0c\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u91cf\u5316\u5219\u662f\u5e45\u5ea6\u4e0a\u7684\u6570\u5b57\u5316\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"811-\u91c7\u6837\u9891\u7387",children:"8.1.1 \u91c7\u6837\u9891\u7387"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u91c7\u6837\u9891\u7387\u662f\u6307\u5c06\u6a21\u62df\u58f0\u97f3\u6ce2\u5f62\u8fdb\u884c\u6570\u5b57\u5316\u65f6\uff0c\u6bcf\u79d2\u949f\u62bd\u53d6\u58f0\u6ce2\u5e45\u5ea6\u6837\u672c\u7684\u6b21\u6570\u3002\u91c7\u6837\u9891\u7387\u7684\u9009\u62e9\u5e94\u8be5\u9075\u5faa\u5948\u594e\u65af\u7279\uff08Harry Nyquist\uff09\u91c7\u6837\u7406\u8bba\uff1a\u5982\u679c\u5bf9\u67d0\u4e00\u6a21\u62df\u4fe1\u53f7\u8fdb\u884c\u91c7\u6837\uff0c\u5219\u91c7\u6837\u540e\u53ef\u8fd8\u539f\u7684\u6700\u9ad8\u4fe1\u53f7\u9891\u7387\u53ea\u6709\u91c7\u6837\u9891\u7387\u7684\u4e00\u534a\uff0c\u6216\u8005\u8bf4\u53ea\u8981\u91c7\u6837\u9891\u7387\u9ad8\u4e8e\u8f93\u5165\u4fe1\u53f7\u6700\u9ad8\u9891\u7387\u7684\u4e24\u500d\uff0c\u5c31\u80fd\u4ece\u91c7\u6837\u4fe1\u53f7\u7cfb\u5217\u91cd\u6784\u539f\u59cb\u4fe1\u53f7\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image002.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u5982\u4e0a\u56fe\u6240\u793a \u752840KHz\u7684\u9891\u7387\u53bb\u91c7\u683720KHz\u7684\u4fe1\u53f7\u53ef\u4ee5\u6b63\u786e\u6355\u6349\u5230\u539f\u59cb\u4fe1\u53f7\u3002\u752830KHz\u7684\u9891\u7387\u53bb\u91c7\u683720KHz\u7684\u4fe1\u53f7\u4f1a\u51fa\u73b0\u6df7\u6dc6\u4fe1\u53f7\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u4e00\u822c\u91cd\u5efa\u97f3\u4e50\u4fe1\u53f7\u65f6\u91c7\u7528\u7684\u6700\u4f4e\u91c7\u6837\u9891\u7387\u4e3a44.1KHz\u3002\u5728\u8bb8\u591a\u9ad8\u54c1\u8d28\u7684\u7cfb\u7edf\u4e2d\uff0c\u91c7\u7528\u768448KHz\u7684\u91c7\u6837\u9891\u7387\u3002"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7cfb\u7edf"}),(0,l.jsx)(n.th,{children:"\u91c7\u6837\u9891\u7387"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u7535\u8bdd"}),(0,l.jsx)(n.td,{children:"8000Hz"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"CD"}),(0,l.jsx)(n.td,{children:"44100Hz"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u4e13\u4e1a\u97f3\u9891"}),(0,l.jsx)(n.td,{children:"48000Hz"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DVD\u97f3\u9891"}),(0,l.jsx)(n.td,{children:"96000Hz"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"812-\u91cf\u5316\u4f4d\u6570",children:"8.1.2 \u91cf\u5316\u4f4d\u6570"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u91cf\u5316\u4f4d\u6570\u662f\u5bf9\u6a21\u62df\u97f3\u9891\u4fe1\u53f7\u7684\u5e45\u5ea6\u8fdb\u884c\u6570\u5b57\u5316\uff0c\u5b83\u51b3\u5b9a\u4e86\u6a21\u62df\u4fe1\u53f7\u6570\u5b57\u5316\u4ee5\u540e\u7684\u52a8\u6001\u8303\u56f4\uff0c\u5e38\u7528\u7684\u67098\u4f4d\u300112\u4f4d\u548c16\u4f4d\u3002\u91cf\u5316\u4f4d\u8d8a\u9ad8\uff0c\u4fe1\u53f7\u7684\u52a8\u6001\u8303\u56f4\u8d8a\u5927\uff0c\u6570\u5b57\u5316\u540e\u7684\u97f3\u9891\u4fe1\u53f7\u5c31\u8d8a\u53ef\u80fd\u63a5\u8fd1\u539f\u59cb\u4fe1\u53f7\uff0c\u4f46\u6240\u9700\u8981\u7684\u5b58\u8d2e\u7a7a\u95f4\u4e5f\u8d8a\u5927\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u97f3\u9891\u5e94\u7528\u4e2d\u5e38\u7528\u7684\u6570\u5b57\u8868\u793a\u65b9\u6cd5\u4e3a\u8109\u51b2\u7f16\u7801\u8c03\u5236(Pulse-Code-Modulated\uff0cPCM)\u4fe1\u53f7\u3002\u5728\u8fd9\u79cd\u8868\u793a\u65b9\u6cd5\u4e2d\uff0c\u6bcf\u4e2a\u91c7\u6837\u5468\u671f\u7528\u4e00\u4e2a\u6570\u5b57\u7535\u5e73\u5bf9\u6a21\u62df\u4fe1\u53f7\u7684\u5e45\u5ea6\u8fdb\u884c\u7f16\u7801\u3002\u5f97\u5230\u7684\u6570\u5b57\u6ce2\u5f62\u662f\u4e00\u7ec4\u91c7\u6837\u81ea\u8f93\u5165\u6a21\u62df\u6ce2\u5f62\u7684\u8fd1\u4f3c\u503c\u3002\u7531\u4e8e\u6240\u6709A/D\u8f6c\u6362\u5668\u7684\u5206\u8fa8\u7387\u90fd\u662f\u6709\u9650\u7684\uff0c\u6240\u4ee5\u5728\u6570\u5b57\u97f3\u9891\u7cfb\u7edf\u4e2d\uff0cA/D\u8f6c\u6362\u5668\u5e26\u6765\u7684\u91cf\u5316\u566a\u58f0\u662f\u4e0d\u53ef\u907f\u514d\u7684\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image003.png",alt:""})}),"\n",(0,l.jsx)(n.h2,{id:"82-alsa\u67b6\u6784",children:"8.2 ALSA\u67b6\u6784"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA\u5168\u79f0\u662fAdvanced Linux Sound Architecture\uff0c\u4e2d\u6587\u97f3\u8bd1\u662fLinux\u9ad8\u7ea7\u58f0\u97f3\u4f53\u7cfb\u3002ALSA \u662fLinux\u5185\u68382.6\u540e\u7eed\u7248\u672c\u4e2d\u652f\u6301\u97f3\u9891\u7cfb\u7edf\u7684\u6807\u51c6\u63a5\u53e3\u7a0b\u5e8f\uff0c\u7531ALSA\u5e93\u3001\u5185\u6838\u9a71\u52a8\u548c\u76f8\u5173\u6d4b \u8bd5\u5f00\u53d1\u5de5\u5177\u7ec4\u6210\uff0c\u66f4\u597d\u7684\u7ba1\u7406Linux\u4e2d\u97f3\u9891\u7cfb\u7edf\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u672c\u5c0f\u8282\u5c06\u4ecb\u7ecdALSA\u7684\u67b6\u6784\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"821-alsa\u67b6\u6784\u4ecb\u7ecd",children:"8.2.1 ALSA\u67b6\u6784\u4ecb\u7ecd"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA\u662fLinux\u7cfb\u7edf\u4e2d\u4e3a\u58f0\u5361\u63d0\u4f9b\u9a71\u52a8\u7684\u5185\u6838\u7ec4\u4ef6\u3002\u5b83\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u5e93\u51fd\u6570\u6765\u7b80\u5316\u76f8\u5e94\u5e94\u7528\u7a0b\u5e8f\u7684\u7f16\u5199\u3002\u76f8\u8f83\u4e8eOSS\u7684\u7f16\u7a0b\u63a5\u53e3,ALSA\u7684\u51fd\u6570\u5e93\u66f4\u52a0\u4fbf\u4e8e\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u5bf9\u5e94\u7528\u7a0b\u5e8f\u800c\u8a00ALSA\u65e0\u7591\u662f\u4e00\u4e2a\u66f4\u4f73\u7684\u9009\u62e9,\u56e0\u4e3a\u5b83\u5177\u6709\u66f4\u52a0\u53cb\u597d\u7684\u7f16\u7a0b\u63a5\u53e3,\u5e76\u4e14\u5b8c\u5168\u517c\u5bb9\u4e8eOSS\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA\u7cfb\u7edf\u5305\u62ec7\u4e2a\u5b50\u9879\u76ee\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u9a71\u52a8\u5305alsa-driver"}),"\n",(0,l.jsx)(n.li,{children:"\u5f00\u53d1\u5305alsa-libs"}),"\n",(0,l.jsx)(n.li,{children:"\u5f00\u53d1\u5305\u63d2\u4ef6alsa-libplugins"}),"\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e\u7ba1\u7406\u5de5\u5177\u5305alsa-utils"}),"\n",(0,l.jsx)(n.li,{children:"OSS\u63a5\u53e3\u517c\u5bb9\u6a21\u62df\u5c42\u5de5\u5177alsa-oss"}),"\n",(0,l.jsx)(n.li,{children:"\u7279\u6b8a\u97f3\u9891\u56fa\u4ef6\u652f\u6301\u5305alsa-finnware"}),"\n",(0,l.jsx)(n.li,{children:"\u5176\u4ed6\u58f0\u97f3\u76f8\u5173\u5904\u7406\u5c0f\u7a0b\u5e8f\u5305alsa-tools"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"ALSA\u58f0\u5361\u9a71\u52a8\u4e0e\u7528\u6237\u7a7a\u95f4\u4f53\u7cfb\u7ed3\u6784\u4ea4\u4e92\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image004.png",alt:""})}),"\n",(0,l.jsx)(n.h2,{id:"83-\u79fb\u690dalsa\u5e93\u53ca\u5de5\u5177",children:"8.3 \u79fb\u690dALSA\u5e93\u53ca\u5de5\u5177"}),"\n",(0,l.jsx)(n.p,{children:"\u79fb\u690dALSA\u4e3b\u8981\u662f\u79fb\u690dalsa-Ub\u548calsa-utils\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"alsa-lib"}),"\uff1a\u7528\u6237\u7a7a\u95f4\u51fd\u6570\u5e93, \u5c01\u88c5\u9a71\u52a8\u63d0\u4f9b\u7684\u62bd\u8c61\u63a5\u53e3, \u901a\u8fc7\u6587\u4ef6libasound.so\u63d0\u4f9bAPI\u7ed9\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"alsa-utils"}),"\uff1a\u5b9e\u7528\u5de5\u5177\u5305,\u901a\u8fc7\u8c03\u7528alsa-lib\u5b9e\u73b0\u64ad\u653e\u97f3\u9891(aplay)\u3001\u5f55\u97f3(arecord) \u7b49\u5de5\u5177\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image005.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA Util\u662f\u7eaf\u5e94\u7528\u5c42\u7684\u8f6f\u4ef6\uff0c\u76f8\u5f53\u4e8eALSA\u8bbe\u5907\u7684\u6d4b\u8bd5\u7a0b\u5e8f\uff0cALSA-Lib\u5219\u662f\u652f\u6301\u5e94\u7528API\u7684\u4e2d\u95f4\u5c42\u7a0b\u5e8f\uff0cALSA-Util\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f1a\u8c03\u7528\u5230ALSA-Lib\u4e2d\u7684\u63a5\u53e3\u6765\u64cd\u4f5c\u5230\u6211\u4eec\u7684\u97f3\u9891\u7f16\u89e3\u7801\u82af\u7247\u7684\u5bc4\u5b58\u5668\uff0c\u800clib\u4e2d\u63a5\u53e3\u5c31\u662f\u4f9d\u8d56\u4e8e\u6700\u5e95\u5c42\u9a71\u52a8\u4ee3\u7801\uff0c\u56e0\u6b64\u79fb\u690dALSA\u7a0b\u5e8f\u7684\u987a\u5e8f\u5c31\u662f\u5148\u540e\u79fb\u690dDriver,Lib,Util\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"831-alsa\u5e93\u4e0b\u8f7d",children:"8.3.1 ALSA\u5e93\u4e0b\u8f7d"}),"\n",(0,l.jsxs)(n.p,{children:["\u200b\t\tALSA\u9996\u5148\u9700\u8981\u5728ALSA\u7684\u5b98\u7f51\u4e0a\u4e0b\u8f7d\u5b98\u7f51",(0,l.jsx)(n.a,{href:"http://www.alsa-project.org%E4%B8%8B%E8%BD%BDalsa-lib%E5%92%8Calsa-utils%E3%80%82",children:"http://www.alsa-project.org\u4e0b\u8f7dalsa-lib\u548calsa-utils\u3002"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image006.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:"\u5982\u4e0a\u56fe\u6240\u793a\u6211\u4eec\u4e0b\u8f7d\u7684\u7248\u672c\u4e3a\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"alsa-lib-1.2.2.tar.bz2"}),"\n",(0,l.jsx)(n.li,{children:"alsa-utils-1.2.2.tar.bz2"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"832-alsa-lib\u7f16\u8bd1",children:"8.3.2 ALSA Lib\u7f16\u8bd1"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA Lib\u79fb\u690d\u4e0d\u9700\u8981\u4fee\u6539\u6e90\u7801\uff0c\u53ea\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u5e93\u4ee3\u7801\u4ee5\u652f\u6301\u81ea\u5df1\u7684\u5e73\u53f0\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"tar -xvf alsa-lib-1.0.27.2.tar.bz2 \ncd alsa-lib-1.0.27.2  \nCC=arm-none-linux-gnueabi-gcc\n./configure --host=arm-linux  --prefix=/home/m/3rd/alsa/install/  \nmake  \nmake install \n"})}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u5728\u4e0a\u8ff0\u547d\u4ee4\u4e2d./configure\u914d\u7f6e\u7684\u51e0\u4e2a\u91cd\u8981\u7684\u914d\u7f6e\u9009\u9879\u89e3\u91ca\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"--host\u6307\u5b9a\u7f16\u8bd1\u5668\uff0c\u8fd9\u91cc\u6307\u5b9a\u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u8fd0\u884c\u672c\u914d\u7f6e\u547d\u4ee4\u524d\u52a1\u5fc5\u4fdd\u8bc1\u7f16\u8bd1\u5668\u5df2\u7ecf\u53ef\u4ee5\u5728Shell\u4e0b\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\u4e86\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"--prefix\u6307\u5b9a\u7f16\u8bd1\u540e\u6587\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u8fd9\u6837\u5b89\u88c5\u547d\u4ee4\u5c31\u8fd8\u4f1a\u6307\u5b9a\u7684\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u521b\u5efalib\u548cinclude\u4e24\u4e2a\u76ee\u5f55\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"833-alsa-util\u7f16\u8bd1",children:"8.3.3 ALSA Util\u7f16\u8bd1"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA Util\u53ef\u4ee5\u751f\u6210\u7528\u4e8e\u64ad\u653e\uff0c\u5f55\u5236\uff0c\u914d\u7f6e\u97f3\u9891\u7684\u5e94\u7528\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6d4b\u8bd5\u9a71\u52a8\u4ee3\u7801\u65f6\u7528\u5904\u5f88\u5927\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"tar -xvf alsa-utils-1.0.27.2.tar.bz2  \ncd alsa-utils-1.0.27.2  \nCC=arm-none-linux-gnueabi-gcc \n./configure --prefix=/home/m/3rd/alsa/install/ --host=arm-linux --with-alsa-inc-prefix=/home/m/3rd/alsa/install/include --with-alsa-prefix=/home/m/3rd/alsa/install/lib --disable-alsamixer --disable-xmlto --disable-nls  \nmake  \n"})}),"\n",(0,l.jsx)(n.h3,{id:"834-alsa\u5e93\u548c\u5de5\u5177\u79fb\u690d\u5165\u5d4c\u5165\u5f0f\u5e73\u53f0",children:"8.3.4 ALSA\u5e93\u548c\u5de5\u5177\u79fb\u690d\u5165\u5d4c\u5165\u5f0f\u5e73\u53f0"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tALSA\u5e93\u548c\u6d4b\u8bd5\u5de5\u5177\u7684\u79fb\u690d\u5c31\u662f\u5c06\u76f8\u5e94\u5e93\u6587\u4ef6\u548c\u53ef\u6267\u884c\u6587\u4ef6\u653e\u5728\u76ee\u6807\u677f\u4e0a\uff0c\u4ee5\u4e0b\u6587\u4ef6 \u5fc5\u987b\u88ab\u62f7\u8d1d\u81f3\u5bf9\u5e94\u4f4d\u7f6e :"}),"\n",(0,l.jsx)(n.p,{children:"\uff081\uff09ALSA Lib\u6587\u4ef6\uff0c\u653e\u5728/lib/\u4e2d\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\uff082\uff09\u914d\u7f6e\u6587\u4ef6\u653e\u5728/usr/local/share\u4e2d\uff0c\u4e0e\u7f16\u8bd1\u65f6\u6307\u5b9a\u7684\u76ee\u5f55\u76f8\u540c\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\uff083\uff09\u6d4b\u8bd5\u5e94\u7528\u6587\u4ef6\uff0cALSA Util\u80fd\u4ea7\u751faplay\u3001amixer\u3001arecord\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u53ef\u6267\u884c\u6587\u4ef6\u653e\u5728/usr/sbin\u4e2d\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\uff084\uff09\u5185\u6838\u76ee\u5f55\u4e2d\u4fdd\u8bc1\u6709/dev/snd/\u76ee\u5f55\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u5b58\u653econtrolC0\uff0cpcmC0D0\uff0c/usr/sbintimer\uff0ctimer\u8fd9\u4e9b\u8bbe\u5907\u6587\u4ef6\uff0c\u5982\u679c\u8fd9\u4e9b\u8bbe\u5907\u6587\u4ef6\u5df2\u7ecf\u5728/dev\u76ee\u5f55\u4e0b\uff0c\u53ef\u624b\u52a8\u62f7\u8d1d\u5230/snd\u76ee\u5f55\u4e2d\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u5728LINUX\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u8bbe\u5907\u6587\u4ef6\u90fd\u662f\u6587\u4ef6\u3002\u97f3\u9891\u8bbe\u5907\u4e5f\u662f\u4e00\u6837\uff0c\u5b83\u7684\u8bbe\u5907\u6587\u4ef6\u88ab\u653e\u5728/dev/snd\u76ee\u5f55\u4e0b\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u8fd9\u4e9b\u8bbe\u5907\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"ls /dev/snd -l\ncrw-rw----+ 1 root audio 116,  2 5\u6708  19 21:24 controlC0     \u7528\u4e8e\u58f0\u5361\u7684\ncrw-rw----+ 1 root audio 116,  4 6\u6708   6 19:31 pcmC0D0c\ncrw-rw----+ 1 root audio 116,  3 6\u6708  11 11:53 pcmC0D0p\ncrw-rw----+ 1 root audio 116, 33 5\u6708  19 21:24 timer\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uff081\uff09controlC0\uff1a\u97f3\u9891\u63a7\u5236\u8bbe\u5907\u6587\u4ef6\uff0c\u4f8b\u5982\u901a\u9053\u9009\u62e9\uff0c\u6df7\u97f3\uff0c\u9ea6\u514b\u98ce\u7684\u63a7\u5236\u7b49\uff1b"}),"\n",(0,l.jsx)(n.p,{children:"\uff082\uff09pcmC0D0c\uff1a\u58f0\u53610\u8bbe\u59070\u7684\u5f55\u97f3\u8bbe\u5907\uff0cc\u8868\u793acapter\uff1b"}),"\n",(0,l.jsx)(n.p,{children:"\uff083\uff09pcmC0D0p\uff1a\u58f0\u53610\u8bbe\u59070\u7684\u64ad\u97f3\u8bbe\u5907\uff0cp\u8868\u793aplay\uff1b"}),"\n",(0,l.jsx)(n.p,{children:"\uff084\uff09timer\uff1a\u5b9a\u65f6\u5668\u8bbe\u7f6e\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"84-alsa\u7684\u8c03\u8bd5",children:"8.4 ALSA\u7684\u8c03\u8bd5"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u672c\u5c0f\u8282\u5c06\u7740\u91cd\u8bb2\u89e3tinyalsa\u5de5\u5177\u4f7f\u7528\uff0ctinyalsa \u662f alsa-lib \u7684\u4e00\u4e2a\u7b80\u5316\u7248\u3002\u5b83\u63d0\u4f9b\u4e86 pcm \u548c control \u7684\u57fa\u672c\u63a5\u53e3\uff1b\u6ca1\u6709\u592a\u591a\u592a\u590d\u6742\u7684\u64cd\u4f5c\u3001\u529f\u80fd\u3002\u53ef\u4ee5\u6309\u9700\u4f7f\u7528\u63a5\u53e3\u3002 tinyalsa-utils \u662f\u57fa\u4e8e tinyalsa \u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u4e0b\u9762\u5bf9\u51e0\u4e2a\u5e38\u7528\u7684\u5de5\u5177\u4f5c\u4ecb\u7ecd\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"841-amixer",children:"8.4.1 amixer"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u4e0e amixer \u4f5c\u7528\u7c7b\u4f3c\uff0c\u7528\u4e8e\u64cd\u4f5c mixer control\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4f7f\u7528\u65b9\u6cd5\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5e38\u7528\u9009\u9879"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u9009\u9879"}),(0,l.jsx)(n.th,{children:"\u529f\u80fd"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-D,--device"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u58f0\u5361\u8bbe\u5907, \u9ed8\u8ba4\u4f7f\u7528card0"})]})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5e38\u7528\u547d\u4ee4"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u547d\u4ee4"}),(0,l.jsx)(n.th,{children:"\u529f\u80fd"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"controls"}),(0,l.jsx)(n.td,{children:"\u5217\u51fa\u6307\u5b9a\u58f0\u5361\u7684\u6240\u6709\u63a7\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"contents"}),(0,l.jsx)(n.td,{children:"\u5217\u51fa\u6307\u5b9a\u58f0\u5361\u7684\u6240\u6709\u63a7\u4ef6\u7684\u5177\u4f53\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"get"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u6307\u5b9a\u63a7\u4ef6\u7684\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"set"}),(0,l.jsx)(n.td,{children:"\u8bbe\u5b9a\u6307\u5b9a\u63a7\u4ef6\u7684\u503c"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"\u83b7\u53d6audiocodec\u58f0\u5361\u7684\u6240\u6709\u63a7\u4ef6\u540d\namixer -Dhw:audiocodec controls\n\u83b7\u53d6\u5f53\u524d\u786c\u4ef6\u97f3\u91cf\namixer -Dhw:audiocodec cget name='LINEOUT volume'\n\u8bbe\u7f6e\u5f53\u524d\u786c\u4ef6\u97f3\u91cf\namixer -Dhw:audiocodec cget name='LINEOUT volume' 25 \n"})}),"\n",(0,l.jsx)(n.h3,{id:"842-aplay",children:"8.4.2 aplay"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\taplay \u662f\u547d\u4ee4\u884c\u7684 ALSA \u58f0\u5361\u9a71\u52a8\u7684\u64ad\u653e\u5de5\u5177\uff0c\u7528\u4e8e\u64ad\u653e\u529f\u80fd\u3002\n\u4f7f\u7528\u65b9\u6cd5\uff1a"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u9009\u9879"}),(0,l.jsx)(n.th,{children:"\u529f\u80fd"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-D,--device"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u58f0\u5361\u8bbe\u5907, \u9ed8\u8ba4\u4f7f\u7528 default"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-l,--list-devices"}),(0,l.jsx)(n.td,{children:"\u5217\u51fa\u5f53\u524d\u6240\u6709\u58f0\u5361"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-t,--file-type"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u64ad\u653e\u6587\u4ef6\u7684\u683c\u5f0f, \u5982 voc,wav,raw, \u4e0d\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\u4f1a\u53bb\u8bfb\u53d6\u6587\u4ef6\u5934\u90e8\u4f5c\u8bc6\u522b"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-c,--channels"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u901a\u9053\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-f,--format"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u91c7\u6837\u683c\u5f0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-r,--rate"}),(0,l.jsx)(n.td,{children:"\u91c7\u6837\u7387"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-d,--duration"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u64ad\u653e\u7684\u65f6\u95f4"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"--period-size"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a period size"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"--buffer-size"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a buffer size"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"aplay -Dhw:audiocodec /mnt/UDISK/test.wav\n"})}),"\n",(0,l.jsx)(n.h3,{id:"843-arecord",children:"8.4.3 arecord"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\tarecord \u662f\u547d\u4ee4\u884c\u7684 ALSA \u58f0\u5361\u9a71\u52a8\u7684\u5f55\u97f3\u5de5\u5177\uff0c\u7528\u4e8e\u5f55\u97f3\u529f\u80fd\u3002\n\u4f7f\u7528\u65b9\u6cd5\uff1a"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u9009\u9879"}),(0,l.jsx)(n.th,{children:"\u529f\u80fd"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-D,--device"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u58f0\u5361\u8bbe\u5907, \u9ed8\u8ba4\u4f7f\u7528 default"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-l,--list-devices"}),(0,l.jsx)(n.td,{children:"\u5217\u51fa\u5f53\u524d\u6240\u6709\u58f0\u5361"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-t,--file-type"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u64ad\u653e\u6587\u4ef6\u7684\u683c\u5f0f, \u5982 voc,wav,raw, \u4e0d\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\u4f1a\u53bb\u8bfb\u53d6\u6587\u4ef6\u5934\u90e8\u4f5c\u8bc6\u522b"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-c,--channels"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u901a\u9053\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-f,--format"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u91c7\u6837\u683c\u5f0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-r,--rate"}),(0,l.jsx)(n.td,{children:"\u91c7\u6837\u7387"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"-d,--duration"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a\u64ad\u653e\u7684\u65f6\u95f4"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"--period-size"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a period size"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"--buffer-size"}),(0,l.jsx)(n.td,{children:"\u6307\u5b9a buffer size"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"\u5f55\u52365s,\u901a\u9053\u6570\u4e3a2, \u91c7\u6837\u7387\u4e3a16000, \u91c7\u6837\u7cbe\u5ea6\u4e3a16bit, \u4fdd\u5b58\u4e3awav\u6587\u4ef6\narecord -Dhw:audiocodec -f S16_LE -r 16000 -c 2 -d 5 /mnt/UDISK/test.wav\n"})}),"\n",(0,l.jsx)(n.h2,{id:"85-\u5e38\u7528\u63a5\u53e3\u8bf4\u660e",children:"8.5 \u5e38\u7528\u63a5\u53e3\u8bf4\u660e"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u4ece\u4ee3\u7801\u89d2\u5ea6\u4f53\u73b0\u4e86alsa-lib\u548calsa-driver\u53cahardwared\u7684\u4ea4\u4e92\u5173\u7cfb\u3002\u7528\u6237\u5c42\u7684alsa-lib\u901a\u8fc7\u64cd\u4f5calsa-driver\u521b\u5efa\u7684\u8bbe\u5907\u6587\u4ef6/dev/snd/pcmC0D0p\u7b49\u5bf9\u5185\u6838\u5c42\u8fdb\u884c\u8bbf\u95ee\u3002\u5185\u6838\u5c42\u7684alsa-drivier\u9a71\u52a8\u518d\u7ecf\u7531sound core\u5bf9\u786c\u4ef6\u58f0\u5361\u82af\u7247\u8fdb\u884c\u8bbf\u95ee\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"http://photos.100ask.net/NewHomeSite/AudioBoard_Image007.png",alt:""})}),"\n",(0,l.jsx)(n.h3,{id:"851-pcm\u63a5\u53e3",children:"8.5.1 PCM\u63a5\u53e3"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u4e3a\u4e86\u65b9\u4fbf\u64cd\u4f5c\u8bbf\u95ee\uff0c alsa-lib \u4e2d\u5c01\u88c5\u4e86\u76f8\u5173\u63a5\u53e3, \u901a\u8fc7 pcmCXDXp/pcmCXDXc \u8282\u70b9 (/dev/snd/pcmCXDXx) \u53bb\u5b9e\u73b0\u64ad\u653e\u3001\u5f55\u97f3\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u4e3b\u8981\u6d89\u53ca\u5230\u7684\u63a5\u53e3\uff1a"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u540d"}),(0,l.jsx)(n.th,{children:"\u89e3\u91ca"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_open"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_info"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_any"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_set_access"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_set_format"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_set_channels"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_set_rate_near"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_set_buffer_size_near"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_hw_params"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_sw_params_current"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_sw_params"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_readi"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_writei"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"snd_pcm_close"}),(0,l.jsx)(n.td,{})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"\u200b\t\t\u8be6\u7ec6 pcm \u63a5\u53e3\u8bf4\u660e\u8bf7\u67e5\u9605\uff1a"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://www.alsa-project.org/alsa-doc/alsa-lib/pcm.html",children:"https://www.alsa-project.org/alsa-doc/alsa-lib/pcm.html"}),"\n",(0,l.jsx)(n.a,{href:"https://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html",children:"https://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html"})]}),"\n",(0,l.jsx)(n.h2,{id:"86-\u57fa\u4e8ealsa\u7684\u97f3\u91cf\u63a7\u5236\u7a0b\u5e8f\u8bbe\u8ba1",children:"8.6 \u57fa\u4e8eALSA\u7684\u97f3\u91cf\u63a7\u5236\u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsx)(n.h3,{id:"861-\u7a0b\u5e8f\u8bbe\u8ba1",children:"8.6.1 \u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6587\u4ef6\u5217\u8868\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6587\u4ef6\u540d"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"AlsaVolume.h"}),(0,l.jsx)(n.td,{children:"\u97f3\u91cf\u63a7\u5236\u5934\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"AlsaVolume.cpp"}),(0,l.jsx)(n.td,{children:"\u97f3\u91cf\u63a7\u5236\u7a0b\u5e8f"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u5458\u51fd\u6570\u8bbe\u8ba1\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u540d"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570\u63cf\u8ff0"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"setMasterVolume"}),(0,l.jsx)(n.td,{children:"long volume"}),(0,l.jsx)(n.td,{children:"\u97f3\u91cf\u503c"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"getCurrentVolume"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u5f53\u524d\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"increaseVolume"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u5355\u6b65\u51cf\u5c0f\u97f3\u91cf\u63a5\u53e3\u51fd\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"decreaseVolume"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{children:"\u5355\u6b65\u589e\u52a0\u97f3\u91cf\u63a5\u53e3\u51fd\u6570"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u5458\u53d8\u91cf\u8bbe\u8ba1\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6210\u5458\u53d8\u91cf\u540d"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"_VOLUMECHANGE"}),(0,l.jsx)(n.td,{children:"const float"}),(0,l.jsx)(n.td,{children:"\u97f3\u91cf\u8c03\u8282\u6b65\u8fdb\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"handle"}),(0,l.jsx)(n.td,{children:"snd_mixer_t*"}),(0,l.jsx)(n.td,{children:"Mixer handle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"element_handle"}),(0,l.jsx)(n.td,{children:"snd_mixer_elem_t*"}),(0,l.jsx)(n.td,{children:"Mixer element handle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"minVolume"}),(0,l.jsx)(n.td,{children:"long"}),(0,l.jsx)(n.td,{children:"\u6700\u5c0f\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"maxVolume"}),(0,l.jsx)(n.td,{children:"long"}),(0,l.jsx)(n.td,{children:"\u6700\u5927\u97f3\u91cf"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"862-alsavolume-\u7c7b\u7684\u5b9a\u4e49",children:"8.6.2 AlsaVolume \u7c7b\u7684\u5b9a\u4e49"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"#pragma once\n#include <alsa/asoundlib.h>\nnamespace rv1108_audio{\nclass AlsaVolume\n{\n  public:\n    AlsaVolume();\n    ~AlsaVolume();\n    int setMasterVolume(long volume); \n    long getCurrentVolume();\n    long increaseVolume();\n    long decreaseVolume();\n  protected:\n    const float _VOLUMECHANGE = 5; \n  private:\n    snd_mixer_t* handle = nullptr;\n    snd_mixer_elem_t* element_handle = nullptr;\n    long minVolume,maxVolume;\n};\n}// namespace rv1108_camera\n"})}),"\n",(0,l.jsx)(n.h3,{id:"863-alsavolume\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",children:"8.6.3 AlsaVolume\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AlsaVolume\u7c7b\u7684\u6784\u9020\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'AlsaVolume::AlsaVolume()\n{\n    snd_mixer_selem_id_t* sid = NULL;\n    const char* card = "default";\n    const char* selem_name = "Playback";\n    //1. \u6253\u5f00\u6df7\u97f3\u8bbe\u5907\n    auto res = snd_mixer_open(&handle, 0);\n\n    //2. attach HCTL to open mixer\n    res = snd_mixer_attach(handle, card);\n\n    //3. Register mixer simple element class.\nsnd_mixer_selem_register(handle, NULL, NULL);\n\n    //4. \u53d6\u5f97\u7b2c\u4e00\u500b element\uff0c\u4e5f\u5c31\u662f Master\nsnd_mixer_load(handle);\n\n    //5. allocate an invalid snd_mixer_selem_id_t using standard alloca\nsnd_mixer_selem_id_alloca(&sid);\n\n    //6. \u8bbe\u7f6e\u5143\u7d20ID\u7684\u4f4d\u7f6e\nsnd_mixer_selem_id_set_index(sid, 0);\n\n    //7. \u8bbe\u7f6e\u5143\u7d20ID\u7684\u540d\u5b57\n    snd_mixer_selem_id_set_name(sid, selem_name);\n\n    //8. \u67e5\u627e\u5143\u7d20\n    element_handle = snd_mixer_find_selem(handle, sid);\n\n    res = snd_mixer_selem_get_playback_volume_range(element_handle, \n                                                                           &minVolume, \n                                                                           &maxVolume);\n}\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e\u97f3\u91cf\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"int AlsaVolume::setMasterVolume(long volume)\n{\n    long alsaVolume = volume * (maxVolume - minVolume) / 100 ;\n\n    if(snd_mixer_selem_set_playback_volume_all(element_handle, alsaVolume) < 0){\n        if(handle)\n        snd_mixer_close(handle);\n        return -1;\n    }\n\n    return 0;\n}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u83b7\u53d6\u5f53\u524d\u97f3\u91cf\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"long AlsaVolume::getCurrentVolume()\n{\n    long alsaVolume;\nif(snd_mixer_selem_get_playback_volume(element_handle, SND_MIXER_SCHN_MONO, &alsaVolume) < 0){\n    if(handle)\n        snd_mixer_close(handle);\n        return -1;\n      }\n    return (alsaVolume*100)/(maxVolume - minVolume);\n}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u97f3\u91cf\u6b65\u8fdb\u51cf\u5c11\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"long AlsaVolume::decreaseVolume()\n{\n    long newVolume = 0;\nif (getCurrentVolume() >= 0 + _VOLUMECHANGE) // check that we won't go below minimum volume\n        newVolume = getCurrentVolume() - _VOLUMECHANGE;\n    else\n        newVolume = 0;\n    setMasterVolume(newVolume);\n    return newVolume;\n}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u97f3\u91cf\u6b65\u8fdb\u589e\u52a0\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"long AlsaVolume::increaseVolume()\n{\n    long newVolume = 0;\nif (getCurrentVolume() <= 100 - _VOLUMECHANGE) // check that we don't go above the max volume\n        newVolume = getCurrentVolume() + _VOLUMECHANGE;\n    else\n        newVolume = 100;\n    setMasterVolume(newVolume);\n    return newVolume;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"87-alsa\u57fa\u7c7b\u7684\u8bbe\u8ba1",children:"8.7 ALSA\u57fa\u7c7b\u7684\u8bbe\u8ba1"}),"\n",(0,l.jsx)(n.h3,{id:"871-\u7a0b\u5e8f\u8bbe\u8ba1",children:"8.7.1 \u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6587\u4ef6\u5217\u8868\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6587\u4ef6\u540d"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"AlsaBase.h"}),(0,l.jsx)(n.td,{children:"ALSA\u57fa\u7c7b\u5934\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"AlsaBase.cpp"}),(0,l.jsx)(n.td,{children:"\u57fa\u7c7b\u7684\u5b9e\u73b0\u7a0b\u5e8f"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"public\u6210\u5458\u53d8\u91cf\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6210\u5458\u53d8\u91cf\u540d"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"rate"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"\u7801\u7387"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"channels"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"\u901a\u9053\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"bits_per_frame"}),(0,l.jsx)(n.td,{children:"mutable int"}),(0,l.jsx)(n.td,{children:"\u6bcf\u5e27\u6570\u636e\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"default_output_buffer_size"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"\u9ed8\u8ba4\u8f93\u51fa\u7f13\u5b58\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"frames"}),(0,l.jsx)(n.td,{children:"snd_pcm_uframes_t"}),(0,l.jsx)(n.td,{children:"\u5e27\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"6"}),(0,l.jsx)(n.td,{children:"buffer_size"}),(0,l.jsx)(n.td,{children:"snd_pcm_uframes_t"}),(0,l.jsx)(n.td,{children:"\u7f13\u5b58\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"7"}),(0,l.jsx)(n.td,{children:"buffer_frames"}),(0,l.jsx)(n.td,{children:"snd_pcm_uframes_t"}),(0,l.jsx)(n.td,{children:"\u7f13\u5b58\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"8"}),(0,l.jsx)(n.td,{children:"period_size"}),(0,l.jsx)(n.td,{children:"snd_pcm_uframes_t"}),(0,l.jsx)(n.td,{children:"\u65f6\u95f4\u6bb5\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"9"}),(0,l.jsx)(n.td,{children:"period_frames"}),(0,l.jsx)(n.td,{children:"snd_pcm_uframes_t"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"10"}),(0,l.jsx)(n.td,{children:"period_time"}),(0,l.jsx)(n.td,{children:"unsigned int"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"11"}),(0,l.jsx)(n.td,{children:"buffer_time"}),(0,l.jsx)(n.td,{children:"unsigned int"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"12"}),(0,l.jsx)(n.td,{children:"bits_per_sample"}),(0,l.jsx)(n.td,{children:"size_t"}),(0,l.jsx)(n.td,{})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"protected\u6210\u5458\u53d8\u91cf\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6210\u5458\u53d8\u91cf\u540d"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"device"}),(0,l.jsx)(n.td,{children:"const char *"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"handle"}),(0,l.jsx)(n.td,{children:"snd_pcm_t *"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"params"}),(0,l.jsx)(n.td,{children:"snd_pcm_hw_params_t *"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"format"}),(0,l.jsx)(n.td,{children:"snd_pcm_format_t"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"access_type"}),(0,l.jsx)(n.td,{children:"snd_pcm_access_t"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"6"}),(0,l.jsx)(n.td,{children:"DEVICE_OPENED"}),(0,l.jsx)(n.td,{children:"bool"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"7"}),(0,l.jsx)(n.td,{children:"PARAMS_SETED"}),(0,l.jsx)(n.td,{children:"bool"}),(0,l.jsx)(n.td,{})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"872-alsabase\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",children:"8.7.2 AlsaBase\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AlsaBase\u7c7b\u7684\u6784\u9020\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"AlsaBase::AlsaBase(const std::string &dev)\n{\ndevice = dev.c_str();\n        rate = 8000;\n        channels = 2;\n        format = SND_PCM_FORMAT_S16_LE;\n        access_type = SND_PCM_ACCESS_RW_INTERLEAVED;\n        frames = 480;\n\n        DEVICE_OPENED = false;\n        PARAMS_SETED = false;\n\n        bits_per_sample = snd_pcm_format_physical_width(format);\n        bits_per_frame = (bits_per_sample >> 3) * channels;\n        \n        default_output_buffer_size = frames * bits_per_frame / 8; // in byte\n\n        buffer_frames = frames * 8;\n        buffer_time = 0;\n        \n        period_frames = buffer_frames / 4;\n        period_time = 0;\n}\n\nAlsaBase::~AlsaBase()\n{\n    if (DEVICE_OPENED){\n        if((err = snd_pcm_close(handle)) < 0){\n            ;\n        }else{\n            ;\n        }\n\n    }\n}\n\nint AlsaBase::set_params()\n{\n\n    if (!DEVICE_OPENED)\n        return -1;\n    // \u5206\u914d\u786c\u4ef6\u53c2\u6570\u7a7a\u95f4\n    snd_pcm_hw_params_alloca(&params);\n\n    //1\u3001\u4ee5\u9ed8\u8ba4\u503c\u586b\u5145\u786c\u4ef6\u53c2\u6570\n    if ((err = snd_pcm_hw_params_any(handle, params)) < 0) {\n        return err;\n    }\n\n    //2\u3001 Restrict a configuration space to contain only real hardware rates.\n    if ((err = snd_pcm_hw_params_set_rate_resample(handle, params, 0)) < 0) {\n        return err;\n    }\n\n    //3\u3001\u8bbe\u7f6e\u5b58\u53d6\u65b9\u5f0f\n    if ((err = snd_pcm_hw_params_set_access(handle, params, access_type)) < 0) {\n        return err;\n    }\n\n    //4\u3001\u8bbe\u7f6e\u683c\u5f0f\uff0cS16_LE\u7b49\n    if ((err = snd_pcm_hw_params_set_format(handle, params, format)) < 0) {\n        return err;\n    }\n\n    //5 \u8bbe\u7f6e\u901a\u9053\n    if ((err = snd_pcm_hw_params_set_channels(handle, params, channels)) < 0) {\n        return err;\n    }\n\n    //6 \u8bbe\u7f6e\u7801\u7387\n    unsigned int rrate;\n    rrate =rate;\n    if ((err = snd_pcm_hw_params_set_rate_near(handle, params, &rrate, NULL)) < 0) \t   {\n        return err;\n    }\n    //7\n    if (buffer_time == 0 && buffer_frames == 0)\n    {\n        err = snd_pcm_hw_params_get_buffer_time_max(params, &buffer_time, 0);\n        assert(err >= 0);\n        if (buffer_time > 500000)\n            buffer_time = 500000;\n    }\n    //8\n    if (period_time == 0 && period_frames == 0)\n    {\n        if (buffer_time > 0)\n        period_time = buffer_time / 4;\n    else\n        period_frames = buffer_frames / 4;\n    }\n    //9\n    if (period_time > 0)\n    {\n        err = snd_pcm_hw_params_set_period_time_near(handle,\n                                                     params,\n                                                     &period_time,\n                                                     0);\n    }                                                 \n    else\n    {\n        err = snd_pcm_hw_params_set_period_size_near(handle,\n                                                     params,\n                                                     &period_frames,\n                                                     0);\n    }                                                 \n    assert(err >= 0);\n    //10\n    if (buffer_time > 0)\n    {\n        err = snd_pcm_hw_params_set_buffer_time_near(handle, params,\n                                                     &buffer_time,\n                                                     0);\n    }\n    else\n    {\n        err = snd_pcm_hw_params_set_buffer_size_near(handle, params,\n                                                     &buffer_frames);\n    }\n    assert(err >= 0);\n\n    // \u5c06\u53c2\u6570\u5199\u5165\u8bbe\u5907\n    if ((err = snd_pcm_hw_params(handle, params)) < 0)\n    {\n        return -1;\n    }\n    else\n    {\n        PARAMS_SETED = true;\n    }\n    snd_pcm_uframes_t t_buffer_frames;\n    snd_pcm_hw_params_get_buffer_size(params, &t_buffer_frames);\n    buffer_frames = t_buffer_frames;\n\n    snd_pcm_uframes_t t_period_frames;\n    snd_pcm_hw_params_get_period_size(params, &t_period_frames, 0);\n    period_frames = t_period_frames;\n\n    return 0;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"88-\u57fa\u4e8ealsa\u97f3\u9891\u7684\u64ad\u653e",children:"8.8 \u57fa\u4e8eALSA\u97f3\u9891\u7684\u64ad\u653e"}),"\n",(0,l.jsx)(n.h3,{id:"881-\u7a0b\u5e8f\u8bbe\u8ba1",children:"8.8.1 \u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6587\u4ef6\u5217\u8868"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6587\u4ef6\u540d"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"AlsaPlayback.h"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u64ad\u653e\u63a7\u5236\u5934\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"AlsaPlayback.cpp"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u64ad\u653e\u7a0b\u5e8f"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u5458\u51fd\u6570\u8bbe\u8ba1"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u540d"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570\u63cf\u8ff0"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u63cf\u8ff0"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"playback"}),(0,l.jsxs)(n.td,{children:["const char *input_buffer ",(0,l.jsx)("br",{})," const long input_buffer_size"]}),(0,l.jsx)(n.td,{}),(0,l.jsx)(n.td,{children:"\u64ad\u653e\u97f3\u9891"})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"812-alsaplay\u7c7b\u7684\u5b9a\u4e49",children:"8.1.2 AlsaPlay\u7c7b\u7684\u5b9a\u4e49"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'#pragma once\n#include "AlsaBase.h"\nnamespace rv1108_audio{\n    \nclass AlsaPlayback : public AlsaBase\n{\n    public:\n    AlsaPlayback(const std::string &dev);\n~AlsaPlayback();\n\n    int open_device();\n    int playback(const char *input_buffer, const long input_buffer_size) const;\n    private:\n    int err;\n};\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"813-alsaplayback\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",children:"8.1.3 AlsaPlayback\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AlsaPlayback\u7c7b\u7684\u6784\u9020\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"AlsaPlayback::AlsaPlayback(const std::string &dev) : AlsaBase(dev)\n{\nif (!DEVICE_OPENED)\n\topen_device();\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"int AlsaPlayback::open_device()\n{\n        if(snd_pcm_open(&handle,\n                        device,\n                        SND_PCM_STREAM_PLAYBACK,\n                        0) < 0)\n        {\n            DEVICE_OPENED = false;\n        }\n        else\n        {\n            DEVICE_OPENED = true;\n        }\n        return 0;\n}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"playback\u51fd\u6570\u7684\u5b9e\u73b0"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"int AlsaPlayback::playback(const char *_input_buffer, const long input_buffer_size) const\n{\n        int res = -1;\n        char *input_buffer = const_cast<char *>(_input_buffer);\n        long r = input_buffer_size / bits_per_frame * 8;\n        AUDIO_DEV_LOCK;\n        while (r > 0)\n        {\n                snd_pcm_wait(handle, 100);\n                do\n                {\n                        res = snd_pcm_writei(handle, input_buffer, frames);\n                        if (res == -EPIPE){\n                                AUDIO_DEV_UNLOCK;\n                                snd_pcm_prepare(handle);\n                                continue;\n                        }\n                }while (res < 0);\n                r -= err;\n                input_buffer += res * bits_per_frame / 8;\n        }\n        return 0;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"89-\u57fa\u4e8ealsa\u97f3\u9891\u7684\u5f55\u5236",children:"8.9 \u57fa\u4e8eALSA\u97f3\u9891\u7684\u5f55\u5236"}),"\n",(0,l.jsx)(n.h3,{id:"891-\u7a0b\u5e8f\u8bbe\u8ba1",children:"8.9.1 \u7a0b\u5e8f\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6587\u4ef6\u5217\u8868"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6587\u4ef6\u540d"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"AlsaCapture.h"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u5f55\u5236\u5934\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"AlsaCapture.cpp"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u5f55\u5236\u7a0b\u5e8f"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u5458\u51fd\u6570\u8bbe\u8ba1"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u540d"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570"}),(0,l.jsx)(n.th,{children:"\u53c2\u6570\u63cf\u8ff0"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570\u63cf\u8ff0"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"capture"}),(0,l.jsx)(n.td,{children:"\u65e0"}),(0,l.jsx)(n.td,{}),(0,l.jsx)(n.td,{children:"\u5f55\u5236\u97f3\u9891"})]})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u5458\u53d8\u91cf\u8bbe\u8ba1"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,l.jsx)(n.th,{children:"\u6210\u5458\u53d8\u91cf\u540d"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"_VOLUMECHANGE"}),(0,l.jsx)(n.td,{children:"const float"}),(0,l.jsx)(n.td,{children:"\u97f3\u91cf\u8c03\u8282\u6b65\u8fdb\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"handle"}),(0,l.jsx)(n.td,{children:"snd_mixer_t*"}),(0,l.jsx)(n.td,{children:"Mixer handle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"element_handle"}),(0,l.jsx)(n.td,{children:"snd_mixer_elem_t*"}),(0,l.jsx)(n.td,{children:"Mixer element handle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"minVolume"}),(0,l.jsx)(n.td,{children:"long"}),(0,l.jsx)(n.td,{children:"\u6700\u5c0f\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"maxVolume"}),(0,l.jsx)(n.td,{children:"long"}),(0,l.jsx)(n.td,{children:"\u6700\u5927\u97f3\u91cf"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"892-alsaplay\u7c7b\u7684\u5b9a\u4e49",children:"8.9.2 AlsaPlay\u7c7b\u7684\u5b9a\u4e49"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'#pragma once\n#include "AlsaBase.h"\nnamespace rv1108_audio{\n\nclass AlsaCapture : public AlsaBase\n{\n  public:\n    // \u8f93\u51fa\u6570\u636e\u7f13\u5b58\n    char *output_buffer;\n    // \u8f93\u51fa\u7f13\u5b58\u5927\u5c0f\n    unsigned int output_buffer_size;\n    // int frames_to_read;\n    // \u7528\u4e8e\u8fd4\u56de\u5df2\u8bfb\u7684\u5e27\u6570\n    int frames_readed;\n\n    AlsaCapture(const std::string &dev);\n    ~AlsaCapture();\n    int open_device();\n    int capture();\n  private:\n    int err;\n};\n\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"893-alsacapture\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0",children:"8.9.3 AlsaCapture\u7c7b\u4e2d\u6210\u5458\u51fd\u6570\u7684\u5b9e\u73b0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AlsaCapture\u7c7b\u7684\u6784\u9020\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"AlsaCapture::AlsaCapture(const std::string &dev) : AlsaBase(dev)\n{\n    if (!DEVICE_OPENED)\n        open_device();\n    if (!PARAMS_SETED)\n        set_params();\n\n    output_buffer_size = default_output_buffer_size;\n    output_buffer = (char *)calloc(output_buffer_size, sizeof(char));\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"int AlsaCapture::open_device()\n{\n    if ((err = snd_pcm_open(&handle,\n                            device,\n                            SND_PCM_STREAM_CAPTURE,\n                            0)) < 0)\n    { \n        DEVICE_OPENED = false;\n        return -1;\n    }\n    else\n    {\n        DEVICE_OPENED = true;\n    }\n\n    return 0;\n}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AlsaCapture\u7c7b\u7684\u6784\u9020\u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"int AlsaCapture::capture()\n{\n    while (1)\n    {\n        int err;\n\n        if ((frames_readed = snd_pcm_readi(handle, output_buffer, frames)) < 0)\n        {\n            // Overrun happened\n            if (frames_readed == -EPIPE)\n            {\n                snd_pcm_prepare(handle);\n                continue;\n            }\n            return -1;\n        }\n        else\n        {\n            return frames_readed;\n        }\n    }\n}\n"})})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>t});var l=s(6540);const r={},d=l.createContext(r);function i(e){const n=l.useContext(d);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);